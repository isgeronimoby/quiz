window.addEventListener("load",function(){if(window.DGW=function(){if(document.getElementById("dgl-gamified-widget")){var e=document.getElementById("dgl-gamified-widget"),t=e.src;t=t.substring(t.lastIndexOf("/")+1,0);var i,n,a=e.getAttribute("data-key"),o=!1,r="club";if(a)return null!==e.getAttribute("data-tunnel")?(n="http://spr-api-test.cloudapp.net/core/v1/xdm/tunnel",i=n.substring(n.lastIndexOf("/xdm/")+1,0),"local"===e.getAttribute("data-tunnel")?(n="http://localhostdev/spr-api/core/v1/xdm/tunnel",i=n.substring(n.lastIndexOf("/xdm/")+1,0)):"live"===e.getAttribute("data-tunnel")&&(n="https://api.rewarded.club/core/v1/xdm/tunnel",i=n.substring(n.lastIndexOf("/xdm/")+1,0))):(n="https://api.rewarded.club/tunnel.html",i=n.substring(DGW.global.tunnelPath.lastIndexOf("/xdm/")+1,0)),null!==e.getAttribute("data-debug")&&(o="false"!==e.getAttribute("data-debug")),null!==e.getAttribute("data-type")&&""!==e.getAttribute("data-type")&&(r=e.getAttribute("data-type")),{templates:{},main:{methods:{},elements:{pages:{}},currentState:"",cache:{drawsList:[],drawsEntries:[],rewardedActions:[]},shown:!1,settings:{hiddenDrawsShow:!0}},side:{methods:{},elements:{}},global:{type:r,club:{name:"TEST_CLUB"},authorized:!1,launched:!1,safariFix:!1,activeDrawsExist:!1,offers:{requests:{}},actions:{requests:{}},api:{apiKey:a,requests:{}},cache:{last:{}},elements:{},methods:{},tunnelPath:n,envPath:i,widgetPathName:t,userStats:{},debug:o,safariFixFirstOpen:!1},states:{},helpers:{}}}console.warn("No script ID or data-key attribute provided")}(),DGW){!function(e,t,i,n,a,o){function r(e,t){var i=typeof e[t];return"function"==i||!("object"!=i||!e[t])||"unknown"==i}function s(e,t){return!("object"!=typeof e[t]||!e[t])}function l(e){return"[object Array]"===Object.prototype.toString.call(e)}function d(){var e="Shockwave Flash",t="application/x-shockwave-flash";if(!v(navigator.plugins)&&"object"==typeof navigator.plugins[e]){var i=navigator.plugins[e].description;i&&!v(navigator.mimeTypes)&&navigator.mimeTypes[t]&&navigator.mimeTypes[t].enabledPlugin&&(E=i.match(/\d+/g))}if(!E){var n;try{n=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),E=Array.prototype.slice.call(n.GetVariable("$version").match(/(\d+),(\d+),(\d+),(\d+)/),1),n=null}catch(a){}}if(!E)return!1;var o=parseInt(E[0],10),r=parseInt(E[1],10);return T=o>9&&r>0,!0}function c(){if(!_){_=!0;for(var e=0;e<j.length;e++)j[e]();j.length=0}}function g(e,t){return _?void e.call(t):void j.push(function(){e.call(t)})}function u(){var e=parent;if(""!==N)for(var t=0,i=N.split(".");t<i.length;t++)e=e[i[t]];return e.easyXDM}function m(t){return e.easyXDM=F,N=t,N&&(U="easyXDM_"+N.replace(".","_")+"_"),B}function p(e){return e.match(O)[3]}function h(e){return e.match(O)[4]||""}function f(e){var t=e.toLowerCase().match(O),i=t[2],n=t[3],a=t[4]||"";return("http:"==i&&":80"==a||"https:"==i&&":443"==a)&&(a=""),i+"//"+n+a}function w(e){if(e=e.replace(H,"$1/"),!e.match(/^(http||https):\/\//)){var t="/"===e.substring(0,1)?"":i.pathname;"/"!==t.substring(t.length-1)&&(t=t.substring(0,t.lastIndexOf("/")+1)),e=i.protocol+"//"+i.host+t+e}for(;I.test(e);)e=e.replace(I,"");return e}function D(e,t){var i="",n=e.indexOf("#");-1!==n&&(i=e.substring(n),e=e.substring(0,n));var a=[];for(var r in t)t.hasOwnProperty(r)&&a.push(r+"="+o(t[r]));return e+(z?"#":-1==e.indexOf("?")?"?":"&")+a.join("&")+i}function v(e){return"undefined"==typeof e}function W(e,t,i){var n;for(var a in t)t.hasOwnProperty(a)&&(a in e?(n=t[a],"object"==typeof n?W(e[a],n,i):i||(e[a]=t[a])):e[a]=t[a]);return e}function G(){var e=t.body.appendChild(t.createElement("form")),i=e.appendChild(t.createElement("input"));i.name=U+"TEST"+x,q=i!==e.elements[i.name],t.body.removeChild(e)}function b(e){v(q)&&G();var i;q?i=t.createElement('<iframe name="'+e.props.name+'"/>'):(i=t.createElement("IFRAME"),i.name=e.props.name),i.id=i.name=e.props.name,delete e.props.name,"string"==typeof e.container&&(e.container=t.getElementById(e.container)),e.container||(W(i.style,{position:"absolute",top:"-2000px",left:"0px"}),e.container=t.body);var n=e.props.src;if(e.props.src="javascript:false",W(i,e.props),i.border=i.frameBorder=0,i.allowTransparency=!0,e.container.appendChild(i),e.onLoad&&M(i,"load",e.onLoad),e.usePost){var a,o=e.container.appendChild(t.createElement("form"));if(o.target=i.name,o.action=n,o.method="POST","object"==typeof e.usePost)for(var r in e.usePost)e.usePost.hasOwnProperty(r)&&(q?a=t.createElement('<input name="'+r+'"/>'):(a=t.createElement("INPUT"),a.name=r),a.value=e.usePost[r],o.appendChild(a));o.submit(),o.parentNode.removeChild(o)}else i.src=n;return e.props.src=n,i}function y(e,t){"string"==typeof e&&(e=[e]);for(var i,n=e.length;n--;)if(i=e[n],i=new RegExp("^"==i.substr(0,1)?i:"^"+i.replace(/(\*)/g,".$1").replace(/\?/g,".")+"$"),i.test(t))return!0;return!1}function S(n){var a,o=n.protocol;if(n.isHost=n.isHost||v(V.xdm_p),z=n.hash||!1,n.props||(n.props={}),n.isHost)n.remote=w(n.remote),n.channel=n.channel||"default"+x++,n.secret=Math.random().toString(16).substring(2),v(o)&&(o=f(i.href)==f(n.remote)?"4":r(e,"postMessage")||r(t,"postMessage")?"1":n.swf&&r(e,"ActiveXObject")&&d()?"6":"Gecko"===navigator.product&&"frameElement"in e&&-1==navigator.userAgent.indexOf("WebKit")?"5":n.remoteHelper?"2":"0");else if(n.channel=V.xdm_c.replace(/["'<>\\]/g,""),n.secret=V.xdm_s,n.remote=V.xdm_e.replace(/["'<>\\]/g,""),o=V.xdm_p,n.acl&&!y(n.acl,n.remote))throw new Error("Access denied for "+n.remote);switch(n.protocol=o,o){case"0":if(W(n,{interval:100,delay:2e3,useResize:!0,useParent:!1,usePolling:!1},!0),n.isHost){if(!n.local){for(var s,l=i.protocol+"//"+i.host,c=t.body.getElementsByTagName("img"),g=c.length;g--;)if(s=c[g],s.src.substring(0,l.length)===l){n.local=s.src;break}n.local||(n.local=e)}var u={xdm_c:n.channel,xdm_p:0};n.local===e?(n.usePolling=!0,n.useParent=!0,n.local=i.protocol+"//"+i.host+i.pathname+i.search,u.xdm_e=n.local,u.xdm_pa=1):u.xdm_e=w(n.local),n.container&&(n.useResize=!1,u.xdm_po=1),n.remote=D(n.remote,u)}else W(n,{channel:V.xdm_c,remote:V.xdm_e,useParent:!v(V.xdm_pa),usePolling:!v(V.xdm_po),useResize:n.useParent?!1:n.useResize});a=[new B.stack.HashTransport(n),new B.stack.ReliableBehavior({}),new B.stack.QueueBehavior({encode:!0,maxLength:4e3-n.remote.length}),new B.stack.VerifyBehavior({initiate:n.isHost})];break;case"1":a=[new B.stack.PostMessageTransport(n)];break;case"2":n.isHost&&(n.remoteHelper=w(n.remoteHelper)),a=[new B.stack.NameTransport(n),new B.stack.QueueBehavior,new B.stack.VerifyBehavior({initiate:n.isHost})];break;case"3":a=[new B.stack.NixTransport(n)];break;case"4":a=[new B.stack.SameOriginTransport(n)];break;case"5":a=[new B.stack.FrameElementTransport(n)];break;case"6":E||d(),a=[new B.stack.FlashTransport(n)]}return a.push(new B.stack.QueueBehavior({lazy:n.lazy,remove:!0})),a}function k(e){for(var t,i={incoming:function(e,t){this.up.incoming(e,t)},outgoing:function(e,t){this.down.outgoing(e,t)},callback:function(e){this.up.callback(e)},init:function(){this.down.init()},destroy:function(){this.down.destroy()}},n=0,a=e.length;a>n;n++)t=e[n],W(t,i,!0),0!==n&&(t.down=e[n-1]),n!==a-1&&(t.up=e[n+1]);return t}function C(e){e.up.down=e.down,e.down.up=e.up,e.up=e.down=null}var q,E,T,M,L,A=this,x=Math.floor(1e4*Math.random()),P=Function.prototype,O=/^((http.?:)\/\/([^:\/\s]+)(:\d+)*)/,I=/[\-\w]+\/\.\.\//,H=/([^:])\/\//g,N="",B={},F=e.easyXDM,U="easyXDM_",z=!1;if(r(e,"addEventListener"))M=function(e,t,i){e.addEventListener(t,i,!1)},L=function(e,t,i){e.removeEventListener(t,i,!1)};else{if(!r(e,"attachEvent"))throw new Error("Browser not supported");M=function(e,t,i){e.attachEvent("on"+t,i)},L=function(e,t,i){e.detachEvent("on"+t,i)}}var R,_=!1,j=[];if("readyState"in t?(R=t.readyState,_="complete"==R||~navigator.userAgent.indexOf("AppleWebKit/")&&("loaded"==R||"interactive"==R)):_=!!t.body,!_){if(r(e,"addEventListener"))M(t,"DOMContentLoaded",c);else if(M(t,"readystatechange",function(){"complete"==t.readyState&&c()}),t.documentElement.doScroll&&e===top){var J=function(){if(!_){try{t.documentElement.doScroll("left")}catch(e){return void n(J,1)}c()}};J()}M(e,"load",c)}var V=function(e){e=e.substring(1).split("&");for(var t,i={},n=e.length;n--;)t=e[n].split("="),i[t[0]]=a(t[1]);return i}(/xdm_e=/.test(i.search)?i.search:i.hash),X=function(){var e={},t={a:[1,2,3]},i='{"a":[1,2,3]}';return"undefined"!=typeof JSON&&"function"==typeof JSON.stringify&&JSON.stringify(t).replace(/\s/g,"")===i?JSON:(Object.toJSON&&Object.toJSON(t).replace(/\s/g,"")===i&&(e.stringify=Object.toJSON),"function"==typeof String.prototype.evalJSON&&(t=i.evalJSON(),t.a&&3===t.a.length&&3===t.a[2]&&(e.parse=function(e){return e.evalJSON()})),e.stringify&&e.parse?(X=function(){return e},e):null)};W(B,{version:"2.4.19.3",query:V,stack:{},apply:W,getJSONObject:X,whenReady:g,noConflict:m}),B.DomHelper={on:M,un:L,requiresJSON:function(i){s(e,"JSON")||t.write('<script type="text/javascript" src="'+i+'"></script>')}},function(){var e={};B.Fn={set:function(t,i){e[t]=i},get:function(t,i){if(e.hasOwnProperty(t)){var n=e[t];return i&&delete e[t],n}}}}(),B.Socket=function(e){var t=k(S(e).concat([{incoming:function(t,i){e.onMessage(t,i)},callback:function(t){e.onReady&&e.onReady(t)}}])),i=f(e.remote);this.origin=f(e.remote),this.destroy=function(){t.destroy()},this.postMessage=function(e){t.outgoing(e,i)},t.init()},B.Rpc=function(e,t){if(t.local)for(var i in t.local)if(t.local.hasOwnProperty(i)){var n=t.local[i];"function"==typeof n&&(t.local[i]={method:n})}var a=k(S(e).concat([new B.stack.RpcBehavior(this,t),{callback:function(t){e.onReady&&e.onReady(t)}}]));this.origin=f(e.remote),this.destroy=function(){a.destroy()},a.init()},B.stack.SameOriginTransport=function(e){var t,a,o,r;return t={outgoing:function(e,t,i){o(e),i&&i()},destroy:function(){a&&(a.parentNode.removeChild(a),a=null)},onDOMReady:function(){r=f(e.remote),e.isHost?(W(e.props,{src:D(e.remote,{xdm_e:i.protocol+"//"+i.host+i.pathname,xdm_c:e.channel,xdm_p:4}),name:U+e.channel+"_provider"}),a=b(e),B.Fn.set(e.channel,function(e){return o=e,n(function(){t.up.callback(!0)},0),function(e){t.up.incoming(e,r)}})):(o=u().Fn.get(e.channel,!0)(function(e){t.up.incoming(e,r)}),n(function(){t.up.callback(!0)},0))},init:function(){g(t.onDOMReady,t)}}},B.stack.FlashTransport=function(e){function a(e,t){n(function(){s.up.incoming(e,d)},0)}function r(i){var n=e.swf+"?host="+e.isHost,a="easyXDM_swf_"+Math.floor(1e4*Math.random());B.Fn.set("flash_loaded"+i.replace(/[\-.]/g,"_"),function(){B.stack.FlashTransport[i].swf=c=u.firstChild;for(var e=B.stack.FlashTransport[i].queue,t=0;t<e.length;t++)e[t]();e.length=0}),e.swfContainer?u="string"==typeof e.swfContainer?t.getElementById(e.swfContainer):e.swfContainer:(u=t.createElement("div"),W(u.style,T&&e.swfNoThrottle?{height:"20px",width:"20px",position:"fixed",right:0,top:0}:{height:"1px",width:"1px",position:"absolute",overflow:"hidden",right:0,top:0}),t.body.appendChild(u));var r="callback=flash_loaded"+o(i.replace(/[\-.]/g,"_"))+"&proto="+A.location.protocol+"&domain="+o(p(A.location.href))+"&port="+o(h(A.location.href))+"&ns="+o(N);u.innerHTML="<object height='20' width='20' type='application/x-shockwave-flash' id='"+a+"' data='"+n+"'><param name='allowScriptAccess' value='always'></param><param name='wmode' value='transparent'><param name='movie' value='"+n+"'></param><param name='flashvars' value='"+r+"'></param><embed type='application/x-shockwave-flash' FlashVars='"+r+"' allowScriptAccess='always' wmode='transparent' src='"+n+"' height='1' width='1'></embed></object>"}var s,l,d,c,u;return s={outgoing:function(t,i,n){c.postMessage(e.channel,t.toString()),n&&n()},destroy:function(){try{c.destroyChannel(e.channel)}catch(t){}c=null,l&&(l.parentNode.removeChild(l),l=null)},onDOMReady:function(){d=e.remote,B.Fn.set("flash_"+e.channel+"_init",function(){n(function(){s.up.callback(!0)})}),B.Fn.set("flash_"+e.channel+"_onMessage",a),e.swf=w(e.swf);var t=p(e.swf),o=function(){B.stack.FlashTransport[t].init=!0,c=B.stack.FlashTransport[t].swf,c.createChannel(e.channel,e.secret,f(e.remote),e.isHost),e.isHost&&(T&&e.swfNoThrottle&&W(e.props,{position:"fixed",right:0,top:0,height:"20px",width:"20px"}),W(e.props,{src:D(e.remote,{xdm_e:f(i.href),xdm_c:e.channel,xdm_p:6,xdm_s:e.secret}),name:U+e.channel+"_provider"}),l=b(e))};B.stack.FlashTransport[t]&&B.stack.FlashTransport[t].init?o():B.stack.FlashTransport[t]?B.stack.FlashTransport[t].queue.push(o):(B.stack.FlashTransport[t]={queue:[o]},r(t))},init:function(){g(s.onDOMReady,s)}}},B.stack.PostMessageTransport=function(t){function a(e){if(e.origin)return f(e.origin);if(e.uri)return f(e.uri);if(e.domain)return i.protocol+"//"+e.domain;throw"Unable to retrieve the origin of the event"}function o(e){var i=a(e);i==d&&e.data.substring(0,t.channel.length+1)==t.channel+" "&&r.up.incoming(e.data.substring(t.channel.length+1),i)}var r,s,l,d;return r={outgoing:function(e,i,n){l.postMessage(t.channel+" "+e,i||d),n&&n()},destroy:function(){L(e,"message",o),s&&(l=null,s.parentNode.removeChild(s),s=null)},onDOMReady:function(){if(d=f(t.remote),t.isHost){var a=function(i){i.data==t.channel+"-ready"&&(l="postMessage"in s.contentWindow?s.contentWindow:s.contentWindow.document,L(e,"message",a),M(e,"message",o),n(function(){r.up.callback(!0)},0))};M(e,"message",a),W(t.props,{src:D(t.remote,{xdm_e:f(i.href),xdm_c:t.channel,xdm_p:1}),name:U+t.channel+"_provider"}),s=b(t)}else M(e,"message",o),l="postMessage"in e.parent?e.parent:e.parent.document,l.postMessage(t.channel+"-ready",d),n(function(){r.up.callback(!0)},0)},init:function(){g(r.onDOMReady,r)}}},B.stack.FrameElementTransport=function(a){var o,r,s,l;return o={outgoing:function(e,t,i){s.call(this,e),i&&i()},destroy:function(){r&&(r.parentNode.removeChild(r),r=null)},onDOMReady:function(){l=f(a.remote),a.isHost?(W(a.props,{src:D(a.remote,{xdm_e:f(i.href),xdm_c:a.channel,xdm_p:5}),name:U+a.channel+"_provider"}),r=b(a),r.fn=function(e){return delete r.fn,s=e,n(function(){o.up.callback(!0)},0),function(e){o.up.incoming(e,l)}}):(t.referrer&&f(t.referrer)!=V.xdm_e&&(e.top.location=V.xdm_e),s=e.frameElement.fn(function(e){o.up.incoming(e,l)}),o.up.callback(!0))},init:function(){g(o.onDOMReady,o)}}},B.stack.NameTransport=function(e){function t(t){var i=e.remoteHelper+(s?"#_3":"#_2")+e.channel;l.contentWindow.sendMessage(t,i)}function i(){s?2!==++c&&s||r.up.callback(!0):(t("ready"),r.up.callback(!0))}function a(e){r.up.incoming(e,m)}function o(){u&&n(function(){u(!0)},0)}var r,s,l,d,c,u,m,p;return r={outgoing:function(e,i,n){u=n,t(e)},destroy:function(){l.parentNode.removeChild(l),l=null,s&&(d.parentNode.removeChild(d),d=null)},onDOMReady:function(){s=e.isHost,c=0,m=f(e.remote),e.local=w(e.local),s?(B.Fn.set(e.channel,function(t){s&&"ready"===t&&(B.Fn.set(e.channel,a),i())}),p=D(e.remote,{xdm_e:e.local,xdm_c:e.channel,xdm_p:2}),W(e.props,{src:p+"#"+e.channel,name:U+e.channel+"_provider"}),d=b(e)):(e.remoteHelper=e.remote,B.Fn.set(e.channel,a));var t=function(){var a=l||this;L(a,"load",t),B.Fn.set(e.channel+"_load",o),function r(){"function"==typeof a.contentWindow.sendMessage?i():n(r,50)}()};l=b({props:{src:e.local+"#_4"+e.channel},onLoad:t})},init:function(){g(r.onDOMReady,r)}}},B.stack.HashTransport=function(t){function i(e){if(h){var i=t.remote+"#"+m++ +"_"+e;(l||!w?h.contentWindow:h).location=i}}function a(e){u=e,s.up.incoming(u.substring(u.indexOf("_")+1),D)}function o(){if(p){var e=p.location.href,t="",i=e.indexOf("#");-1!=i&&(t=e.substring(i)),t&&t!=u&&a(t)}}function r(){d=setInterval(o,c)}var s,l,d,c,u,m,p,h,w,D;return s={outgoing:function(e,t){i(e)},destroy:function(){e.clearInterval(d),!l&&w||h.parentNode.removeChild(h),h=null},onDOMReady:function(){if(l=t.isHost,c=t.interval,u="#"+t.channel,m=0,w=t.useParent,D=f(t.remote),l){if(W(t.props,{src:t.remote,name:U+t.channel+"_provider"}),w)t.onLoad=function(){p=e,r(),s.up.callback(!0)};else{var i=0,a=t.delay/50;!function o(){if(++i>a)throw new Error("Unable to reference listenerwindow");try{p=h.contentWindow.frames[U+t.channel+"_consumer"]}catch(e){}p?(r(),s.up.callback(!0)):n(o,50)}()}h=b(t)}else p=e,r(),w?(h=parent,s.up.callback(!0)):(W(t,{props:{src:t.remote+"#"+t.channel+new Date,name:U+t.channel+"_consumer"},onLoad:function(){s.up.callback(!0)}}),h=b(t))},init:function(){g(s.onDOMReady,s)}}},B.stack.ReliableBehavior=function(e){var t,i,n=0,a=0,o="";return t={incoming:function(e,r){var s=e.indexOf("_"),l=e.substring(0,s).split(",");e=e.substring(s+1),l[0]==n&&(o="",i&&i(!0)),e.length>0&&(t.down.outgoing(l[1]+","+n+"_"+o,r),a!=l[1]&&(a=l[1],t.up.incoming(e,r)))},outgoing:function(e,r,s){o=e,i=s,t.down.outgoing(a+","+ ++n+"_"+e,r)}}},B.stack.QueueBehavior=function(e){function t(){if(e.remove&&0===s.length)return void C(i);if(!l&&0!==s.length&&!r){l=!0;var a=s.shift();i.down.outgoing(a.data,a.origin,function(e){l=!1,a.callback&&n(function(){a.callback(e)},0),t()})}}var i,r,s=[],l=!0,d="",c=0,g=!1,u=!1;return i={init:function(){v(e)&&(e={}),e.maxLength&&(c=e.maxLength,u=!0),e.lazy?g=!0:i.down.init()},callback:function(e){l=!1;var n=i.up;t(),n.callback(e)},incoming:function(t,n){if(u){var o=t.indexOf("_"),r=parseInt(t.substring(0,o),10);d+=t.substring(o+1),0===r&&(e.encode&&(d=a(d)),i.up.incoming(d,n),d="")}else i.up.incoming(t,n)},outgoing:function(n,a,r){e.encode&&(n=o(n));var l,d=[];if(u){for(;0!==n.length;)l=n.substring(0,c),n=n.substring(l.length),d.push(l);for(;l=d.shift();)s.push({data:d.length+"_"+l,origin:a,callback:0===d.length?r:null})}else s.push({data:n,origin:a,callback:r});g?i.down.init():t()},destroy:function(){r=!0,i.down.destroy()}}},B.stack.VerifyBehavior=function(e){function t(){n=Math.random().toString(16).substring(2),i.down.outgoing(n)}var i,n,a;return i={incoming:function(o,r){var s=o.indexOf("_");-1===s?o===n?i.up.callback(!0):a||(a=o,e.initiate||t(),i.down.outgoing(o)):o.substring(0,s)===a&&i.up.incoming(o.substring(s+1),r)},outgoing:function(e,t,a){i.down.outgoing(n+"_"+e,t,a)},callback:function(i){e.initiate&&t()}}},B.stack.RpcBehavior=function(e,t){function i(e){e.jsonrpc="2.0",o.down.outgoing(r.stringify(e))}function n(e,t){var n=Array.prototype.slice;return function(){var a,o=arguments.length,r={method:t};o>0&&"function"==typeof arguments[o-1]?(o>1&&"function"==typeof arguments[o-2]?(a={success:arguments[o-2],error:arguments[o-1]},r.params=n.call(arguments,0,o-2)):(a={success:arguments[o-1]},r.params=n.call(arguments,0,o-1)),d[""+ ++s]=a,r.id=s):r.params=n.call(arguments,0),e.namedParams&&1===r.params.length&&(r.params=r.params[0]),i(r)}}function a(e,t,n,a){if(!n)return void(t&&i({id:t,error:{code:-32601,message:"Procedure not found."}}));var o,r;t?(o=function(e){o=P,i({id:t,result:e})},r=function(e,n){r=P;var a={id:t,error:{code:-32099,message:e}};n&&(a.error.data=n),i(a)}):o=r=P,l(a)||(a=[a]);try{var s=n.method.apply(n.scope,a.concat([o,r]));v(s)||o(s)}catch(d){r(d.message)}}var o,r=t.serializer||X(),s=0,d={};return o={incoming:function(e,n){var o=r.parse(e);if(o.method)t.handle?t.handle(o,i):a(o.method,o.id,t.local[o.method],o.params);else{var s=d[o.id];o.error?s.error&&s.error(o.error):s.success&&s.success(o.result),delete d[o.id]}},init:function(){if(t.remote)for(var i in t.remote)t.remote.hasOwnProperty(i)&&(e[i]=n(t.remote[i],i));o.down.init()},destroy:function(){for(var i in t.remote)t.remote.hasOwnProperty(i)&&e.hasOwnProperty(i)&&delete e[i];o.down.destroy()}}},A.easyXDM=B}(window,document,location,window.setTimeout,decodeURIComponent,encodeURIComponent),function(e,t){"use strict";function i(e,o){return this instanceof i?(a.isDOM(e)?this.container=e:this.container=t.querySelector(e),this.settings=a.merge(n,o),this.slider=this.container.children[0],this.items=this.slider.children,this.containerWidth=this.container.offsetWidth,this.containerHeight=this.container.offsetHeight,this.itemWidth=this.items[0].offsetWidth,this.itemHeight=this.items[0].offsetHeight,this.itemMargin=0,"vertical"===this.settings.direction?(this.containerDimension=this.containerHeight,this.itemDimension=this.itemHeight):(this.containerDimension=this.containerWidth,this.itemDimension=this.itemWidth),this.settings.visibles>1&&this.settings.justify&&this.justifyItems(),void((this.settings.controlNext||this.settings.controlPrev)&&this.addControls(this.settings.controlNext,this.settings.controlPrev,this.settings.steps))):new i(e,o)}var n={visibles:1,direction:"horizontal",controlPrev:"",controlNext:"",justify:!0,steps:1,dots:"",touch:!0,animation:"slide",autoPlay:1e3,infinite:!0},a={isDOM:function(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName},merge:function(e,t){var i={};for(var n in e)t.hasOwnProperty(n)?i[n]=t[n]:i[n]=e[n];return i},each:function(e,t){for(var i=0,n=e.length;n>i;i+=1)t.call(e[i],i)}};i.fn=i.prototype,i.fn.justifyItems=function(){var e,t=this.settings.visibles,i=this.items,n=this.settings.direction;e=(this.containerDimension-this.itemDimension*t)/(t-1),e=Math.ceil(e),this.itemMargin=e,a.each(i,function(){this.style["vertical"===n?"marginBottom":"marginRight"]=e+"px"})},i.getLimit=function(e,t){var i=e.settings,n=i.direction,a=e.itemDimension,o=e.itemMargin,r=i.visibles,s=e.items;return"vertical"===n&&"max"===t?0:"vertical"===n&&"min"===t?-1*((a+o)*(s.length-r+1)-o):"horizontal"===n&&"max"===t?(a+o)*(s.length-r+1)-o:"horizontal"===n&&"min"===t?0:void 0},i.fn.isAtLimit=function(e){var t=i.getLimit(this,"max"),n=i.getLimit(this,"min");return n>e?!0:e>t},i.fn.getNextPos=function(e){var t,i,n;return i=this.settings.direction,t=this.slider.style["vertical"===i?"top":"right"],t&&(t=Math.floor(parseInt(t))),n="vertical"===i?t-(this.itemDimension+this.itemMargin)*e:t+(this.itemDimension+this.itemMargin)*e,Math.ceil(n)},i.fn.move=function(e){e=e||1;var t=this.getNextPos(e),i=this.settings.direction;return this.isAtLimit(t)?this:void(this.slider.style["vertical"===i?"top":"right"]=t+"px")},i.fn.addControls=function(e,i,n){var o=this;a.isDOM(e)||(e=t.querySelector(e)),a.isDOM(i)||(i=t.querySelector(i)),e.addEventListener("click",function(e){e.preventDefault(),o.move(n)}),i.addEventListener("click",function(e){e.preventDefault(),o.move(-1*n)})},e.Slider=i}(window,document),DGW.global.api.easyXDM=easyXDM.noConflict("DGW.global.api"),DGW.global.api.rpc=new DGW.global.api.easyXDM.Rpc({remote:DGW.global.tunnelPath},{remote:{apiTunnel:{},writeClubCookie:{},readClubCookie:{}}}),DGW.global.api.generic=function(e,t,i){var n={},a="GET",o="";switch(i=i||"",e){case"getApp":o="app/getapp";break;case"signUp":a="POST",o="auth/signup",i=JSON.stringify(i);break;case"signIn":a="POST",o="auth/login",i=JSON.stringify(i);break;case"signOut":a="POST",o="auth/logout";break;case"forgotPass":a="POST",o="auth/forgotpassword",i=JSON.stringify(i);break;case"facebookLogIn":a="POST",o="auth/facebookconnect",i=JSON.stringify(i);break;case"getUser":o="user/getuser";break;case"getDraws":o="draw/getdraws";break;case"getDrawEntries":o="draw/getdrawentries";break;case"drawBet":a="POST",o="draw/bet",i=JSON.stringify(i);break;case"drawPlayers":o="draw/getdrawplayers?drawid="+i;break;case"claimPrize":a="POST",o="draw/claimprize",i=JSON.stringify(i);break;case"getAllActivities":o="activity/getallactivities";break;case"getUserActivities":o="activity/getuseractivities";break;case"getOffers":o="offer/getoffers";break;case"trackOffer":a="POST",o="offer/trackoffer",i=JSON.stringify(i);break;case"completeOffer":a="POST",o="offer/completeoffer",i=JSON.stringify(i);break;case"cancelOffer":a="POST",o="offer/canceloffer",i=JSON.stringify(i);break;case"getUserOffers":o="offer/getuseroffers";break;case"getActions":o="rewardedaction/getactions";break;case"getUserActions":o="rewardedaction/getuseractions";break;case"trackAction":a="POST",o="rewardedaction/trackrewardedaction",i=JSON.stringify(i);break;case"getLeaderboard":o="leaderboard/gettopearners";break;case"getBadges":o="badge/getbadges";break;case"getEarnedBadges":o="badge/getearnedbadges";break;case"shareRewardAction":o="draw/getsharelinks?drawid="+i}DGW.global.api.rpc.apiTunnel({apiKey:DGW.global.api.apiKey,method:a,endpoint:o,params:i},function(e){n=e,t&&t(e),DGW.main.methods.loadingFinished()},function(e){DGW.helpers.console.error(e.message),DGW.main.methods.loadingFinished()}),DGW.main.methods.loadingStarted()},DGW.global.api.requests.safariFix=function(){var e,t=window.open(DGW.global.tunnelPath+"?safarifix","_blank","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=1, height=1, top=0, left=0");e=setInterval(function(){t.closed&&(window.clearInterval(e),DGW.global.safariFix=!0,DGW.global.safariFixFirstOpen=!0,DGW.global.api.requests.checkServerAvailability())},50)},DGW.global.api.requests.checkServerAvailability=function(){DGW.global.api.generic("getApp",function(e){e.error&&500==e.status?DGW.helpers.console.error("checkServerAvailability no-server",e):(DGW.helpers.console.info("checkServerAvailability: ",e),DGW.global.club.name=e.data.FoundationName,DGW.global.api.requests.getDraws(DGW.global.api.requests.initMainFlow))})},DGW.global.api.requests.initMainFlow=function(){var e=Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0;e&&!DGW.global.safariFix?DGW.global.api.requests.readServerCookie("safarifix",function(e){e?(DGW.global.safariFix=!0,DGW.global.api.requests.checkServerAvailability()):DGW.global.methods.safariFixInit()}):"club"==DGW.global.type?DGW.global.api.requests.setServerCookie(DGW.global.club.name,function(e){e?DGW.global.methods.init():DGW.helpers.console.warn("no third party cookies enabled")}):"sponsor"==DGW.global.type?DGW.global.api.requests.readServerCookie(DGW.global.club.name,function(e){1==e&&DGW.global.methods.init()}):DGW.helpers.console.warn('Please, add "data-type" attribute to the widget')},DGW.global.api.requests.setServerCookie=function(e,t){DGW.global.api.rpc.writeClubCookie(e,function(e){DGW.helpers.console.info(e),t&&t(e)})},DGW.global.api.requests.readServerCookie=function(e,t){DGW.global.api.rpc.readClubCookie(e,function(e){DGW.helpers.console.info(e),t&&t(e)})},DGW.global.api.requests.signUp=function(e,t,i){DGW.global.api.generic("signUp",function(e){200==e.status?(DGW.helpers.console.info("signUp: ",e.data),DGW.global.authorized=!0,DGW.global.methods.authorize(),DGW.main.methods.profileSetData(e.data),t&&t(e.data)):(DGW.global.authorized=!1,DGW.helpers.console.error("signUp ",e.error),i&&i(e.error))},{Username:e.Username,Email:e.Email,Password:e.Password})},DGW.global.api.requests.signIn=function(e,t,i){DGW.global.api.generic("signIn",function(e){200==e.status?(DGW.helpers.console.info("signIn ",e.data),DGW.global.methods.authorize(),DGW.main.methods.profileSetData(e.data),DGW.global.authorized=!0,t&&t(e.data)):(DGW.global.authorized=!1,DGW.helpers.console.error("signIn ",e.error),i&&i(e.error))},{Email:e.Email,Password:e.Password})},DGW.global.api.requests.signOut=function(){DGW.global.api.generic("signOut",function(){DGW.helpers.console.info("Signed out"),DGW.global.authorized=!1,DGW.global.methods.unAuthorize()})},DGW.global.api.requests.forgotPass=function(e,t,i){DGW.global.api.generic("forgotPass",function(e){200==e.status?(DGW.helpers.console.info("forgotPass ",e.data),t&&t(e.data)):(DGW.helpers.console.error("forgotPass ",e.error),i&&i(e.error))},{Email:e})},DGW.global.api.requests.getUser=function(e,t){DGW.global.api.generic("getUser",function(i){200==i.status?(DGW.helpers.console.info("getUser success ",i.data),DGW.global.authorized===!1&&(DGW.global.authorized=!0,DGW.global.methods.authorize()),DGW.main.methods.profileSetData(i.data),e&&e(i.data)):(DGW.global.authorized=!1,DGW.helpers.console.error("getUser anon ",i),t&&t(i.error))})},DGW.global.api.requests.getDraws=function(e,t){DGW.global.api.generic("getDraws",function(i){200==i.status?(DGW.helpers.console.info("getDraws ",i.data),DGW.main.cache.drawsList=i.data.Draws.sort(function(e,t){return new Date(t.EndDate)-new Date(e.EndDate)}),DGW.global.cache.last.winner=DGW.main.cache.drawsList.filter(function(e){return null!==e.Winner})[0].Winner,DGW.global.cache.last.prize=DGW.main.cache.drawsList[0].Prize,1==DGW.global.authorized?DGW.global.api.requests.getDrawEntries():DGW.main.methods.drawsConstructor(DGW.main.cache),e&&e(i.data)):(DGW.helpers.console.error("getDraws ",i.error),t&&t(i.error))})},DGW.global.api.requests.getDrawEntries=function(e,t){DGW.global.api.generic("getDrawEntries",function(i){200==i.status?(DGW.helpers.console.info("getDrawEntries ",i.data),DGW.main.cache.drawsEntries=i.data.DrawEntries,DGW.main.methods.drawsConstructor(DGW.main.cache),e&&e(i.data)):(DGW.helpers.console.error("getDrawEntries ",i.error),t&&t(i.error))})},DGW.global.api.requests.drawBet=function(e,t,i,n){DGW.global.api.generic("drawBet",function(e){200==e.status?(DGW.helpers.console.info("drawBet ",e),DGW.global.api.requests.getDrawEntries(),DGW.main.methods.updateUserInfoBet(e.data.DrawEntry,e.data.User),i&&i(e.data)):(n&&n(e.error),DGW.helpers.console.error("drawBet ",e.error))},{DrawId:e,PointsAmount:t})},DGW.global.api.requests.drawPlayers=function(e,t,i){DGW.global.api.generic("drawPlayers",function(e){200==e.status?(DGW.helpers.console.info("drawPlayers ",e),t&&t(e.data)):(i&&i(e.error),DGW.helpers.console.error("drawPlayers ",e.error))},e)},DGW.global.api.requests.claimPrize=function(e,t,i,n){DGW.global.api.generic("claimPrize",function(e){200==e.status?i&&i(e.data):(n&&n(e.error),DGW.helpers.console.error(e.error))},{DrawId:e,Address1:t.Address1,Address2:t.Address2,County:t.County,Postcode:t.Postcode})},DGW.global.api.requests.connectFB=function(e,t){DGW.helpers.centerWindowPopup(DGW.global.envPath+"auth/facebook?api_key="+DGW.global.api.apiKey,"fbWindow",460,340,function(){e&&e()})},DGW.global.api.requests.getAllActivities=function(e,t){DGW.global.api.generic("getAllActivities",function(i){200==i.status?(DGW.helpers.console.info("getAllActivities ",i.data),DGW.main.methods.activitiesConstructor(i.data.Activities),e&&e(i.data)):(DGW.helpers.console.error("getAllActivities ",i.error),t&&t(i.error))})},DGW.global.api.requests.getUserActivities=function(e,t){DGW.global.api.generic("getUserActivities",function(i){200==i.status?(DGW.helpers.console.info("getUserActivities ",i.data),DGW.main.methods.activitiesConstructor(i.data.Activities),e&&e(i.data)):(DGW.helpers.console.error("getUserActivities ",i.error),t&&t(i.error))})},DGW.global.api.requests.getOffers=function(e,t){DGW.global.api.generic("getOffers",function(i){200==i.status?(DGW.helpers.console.info("getOffers ",i.data),DGW.main.methods.offersConstructor(i.data),e&&e(i.data)):(DGW.helpers.console.error("getOffers ",i.error),t&&t(i.error))})},DGW.global.api.requests.getUserOffers=function(e,t){DGW.global.api.generic("getUserOffers",function(i){200==i.status?(DGW.helpers.console.info("getUserOffers ",i.data),DGW.main.methods.offersConstructor(i.data),e&&e(i.data)):(DGW.helpers.console.error("getUserOffers ",i.error),t&&t(i.error))})},DGW.global.api.requests.trackOffer=function(e,t,i){DGW.global.api.generic("trackOffer",function(n){200==n.status?(DGW.helpers.console.info(n.data),DGW.helpers.console.info("Tracking of "+e+" has started"),t&&t(n.data)):(DGW.helpers.console.error("trackOffer ",n.error),i&&i(n.error))},{OfferId:e})},DGW.global.api.requests.completeOffer=function(e,t,i){DGW.global.api.generic("completeOffer",function(n){200==n.status?(DGW.helpers.console.info(n.data),DGW.helpers.console.info("Offer "+e+" has been completed"),DGW.global.api.requests.getUser(),DGW.global.api.requests.getUserOffers(),t&&t(n.data)):(DGW.helpers.console.error("completeOffer ",n.error),i&&i(n.error))},{OfferId:e})},DGW.global.api.requests.cancelOffer=function(e,t,i){DGW.global.api.generic("cancelOffer",function(n){200==n.status?(DGW.helpers.console.info(n.data),DGW.helpers.console.info("Offer "+e+" has been cancelled"),DGW.global.api.requests.getUser(),DGW.global.api.requests.getUserOffers(),t&&t(n.data)):(DGW.helpers.console.error("cancelOffer ",n.error),i&&i(n.error))},{OfferId:e})},DGW.global.api.requests.getActions=function(e,t){DGW.global.api.generic("getActions",function(i){
200==i.status?(DGW.helpers.console.info("getActions ",i.data),DGW.main.cache.rewardedActions=i.data.Actions,DGW.main.methods.setRewardedActions(),e&&e(i.data)):(DGW.helpers.console.error("getActions ",i.error),t&&t(i.error))})},DGW.global.api.requests.getUserActions=function(e,t){DGW.global.api.generic("getUserActions",function(i){200==i.status?(DGW.helpers.console.info("getUserActions ",i.data),DGW.main.cache.rewardedActions=i.data.Actions,DGW.main.methods.setRewardedActions(),e&&e(i.data)):(DGW.helpers.console.error("getUserActions ",i.error),t&&t(i.error))})},DGW.global.api.requests.trackAction=function(e,t,i){DGW.global.api.generic("trackAction",function(e){200==e.status?(DGW.helpers.console.info("trackAction ",e.data),DGW.global.api.requests.getUserActions(),DGW.global.api.requests.getUser(),e.data.RewardResult&&t&&t(e.data)):(DGW.helpers.console.error("trackAction ",e.error),i&&i(e.error))},{RewardedActionTypeId:e})},DGW.global.api.requests.getLeaderboard=function(e,t){DGW.global.api.generic("getLeaderboard",function(i){200==i.status?(DGW.helpers.console.info("getLeaderboard ",i.data),DGW.main.methods.leaderboardConstructor(i.data.Earners),e&&e(i.data)):(DGW.helpers.console.error("getLeaderboard ",i.error),t&&t(i.error))})},DGW.global.api.requests.getAllBadges=function(e,t){DGW.global.api.generic("getBadges",function(i){200==i.status?(DGW.helpers.console.info("getBadges ",i.data),DGW.global.userStats.badges.all=i.data.Badges,DGW.global.api.requests.getEarnedBadges(),e&&e(i.data)):(DGW.helpers.console.error("getBadges ",i.error),t&&t(i.error))})},DGW.global.api.requests.getEarnedBadges=function(e,t){DGW.global.api.generic("getEarnedBadges",function(i){200==i.status?(DGW.helpers.console.info("getEarnedBadges ",i.data),DGW.global.userStats.badges.earned=i.data.EarnedBadges,DGW.main.methods.updateBadgesInfo(),e&&e(i.data)):(DGW.helpers.console.error("getEarnedBadges ",i.error),t&&t(i.error))})},DGW.global.api.requests.shareRewardAction=function(e,t,i){DGW.global.api.generic("shareRewardAction",function(e){200==e.status?(DGW.helpers.console.info("shareRewardedAction: ",e.data),t&&t(e.data)):(DGW.helpers.console.error("shareRewardedAction: ",e.error),i&&i(e.error))},e)},DGW.global.offers.requests.shareOfferFb=function(e){DGW.helpers.centerWindowPopup(DGW.global.envPath+"offer/facebookshare?api_key="+DGW.global.api.apiKey+"&offerid="+e,"fbWindow",460,340,function(){DGW.global.api.requests.getUserOffers()})},DGW.global.offers.requests.shareOfferTw=function(e,t){DGW.global.api.requests.trackOffer(e),DGW.helpers.centerWindowPopup("https://twitter.com/intent/tweet?text=Some+offer+text&url="+encodeURIComponent(t),"twWindow",460,340,function(){DGW.global.api.requests.completeOffer(e,function(){DGW.main.methods.notificationConstructor("Cool, you've just earned more points for Sharing on Twitter")})})},DGW.global.actions.requests.shareFb=function(e,t){var i=DGW.helpers.createCenteredWindow("shareFbAction",460,340);DGW.global.api.requests.shareRewardAction(e,function(e){DGW.helpers.centerWindowPopup(DGW.global.envPath+"rewardedaction/facebookshare?api_key="+DGW.global.api.apiKey+"&shareurl="+encodeURIComponent(t?e.WinnerShareUrl:e.ShareUrl),"fbWindow2",460,340,function(){DGW.global.api.requests.getUser(),DGW.global.api.requests.getUserActions()},i)})},DGW.global.actions.requests.shareTw=function(e,t,i){var n=DGW.helpers.createCenteredWindow("shareTwAction",460,340);DGW.global.api.requests.shareRewardAction(e,function(e){DGW.helpers.centerWindowPopup("https://twitter.com/intent/tweet?text="+t+"&url="+encodeURIComponent(i?e.WinnerShareUrl:e.ShareUrl)+"&hashtags="+DGW.global.club.name,"twWindow2",460,340,function(){DGW.global.api.requests.trackAction(5,function(){DGW.main.methods.notificationConstructor("Cool, you've just earned more points for Sharing on Twitter")})},n)})},DGW.global.offers.requests.watchVideo=function(e,t){function i(){l=new YT.Player("dg-o-w-video-playing",{height:DGW.main.elements.widgetBody.clientHeight,width:DGW.main.elements.widgetBody.clientWidth,videoId:DGW.helpers.getURLParameter("v",t),playerVars:{controls:0,rel:0,origin:window.document.origin,fs:0,modestbranding:1},events:{onReady:n,onStateChange:a}})}function n(t){t.target.playVideo(),DGW.global.api.requests.trackOffer(e),c=window.setInterval(function(){0==DGW.main.shown&&o()},100),g=window.setInterval(function(){DGW.main.elements.pages.videoHolder.querySelector("span").innerHTML=Math.floor(l.getDuration()-l.getCurrentTime())},1e3),DGW.helpers.console.log("Video has started")}function a(t){0===t.data&&(r(),DGW.global.api.requests.completeOffer(e,function(){DGW.main.methods.notificationConstructor("Cool, you've just earned more points for Watching this cool video")}),DGW.helpers.console.log("Video has finished"))}function o(){DGW.global.api.requests.cancelOffer(e),r()}function r(){DGW.helpers.addClass(DGW.main.elements.pages.videoHolder.querySelector(".dg-o-w-video-holder"),"dg-video-hidden"),setTimeout(function(){DGW.main.elements.widgetBody.removeChild(DGW.main.elements.pages.videoHolder),DGW.helpers.removeClass(DGW.main.elements.pages.videoHolder.querySelector(".dg-o-w-video-holder"),"dg-video-hidden")},320),DGW.main.elements.pages.videoHolder.querySelector("span").innerHTML="",window.clearInterval(c),window.clearInterval(g),u.removeEventListener("click",o),u.addEventListener("click",DGW.main.methods.hideWidget)}function s(){d=window.setInterval(function(){window.YT.Player&&(window.clearInterval(d),DGW.main.elements.widgetBody.appendChild(DGW.main.elements.pages.videoHolder),u.removeEventListener("click",DGW.main.methods.hideWidget),u.addEventListener("click",o),window.setTimeout(function(){i()},0))},50)}var l,d,c,g,u=DGW.main.elements.widget.querySelector(".dg-o-w-close");if(window.YT)s();else{var m=document.createElement("script");m.onload=function(){s()},m.src="https://www.youtube.com/player_api",document.head.appendChild(m)}},DGW.helpers.addClass=function(e,t){new RegExp(t).test(e.className)||(0===e.className.length?e.className+=t:e.className+=" "+t)},DGW.helpers.removeClass=function(e,t){e.className=e.className.replace(new RegExp(t),"").trim()},DGW.helpers.toggleClass=function(e,t){new RegExp(t).test(e.className)?DGW.helpers.removeClass(e,t):DGW.helpers.addClass(e,t)},DGW.helpers.hasClass=function(e,t){return new RegExp(t).test(e.className)},DGW.helpers.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},DGW.helpers.drawsTimerConstr=function(e){function t(e){var t="z"==e.dt.substring(e.dt.length-1).toLowerCase()?new Date(e.dt):new Date(e.dt+"Z"),i=new Date;return t-i>0}function i(){n.forEach(function(e){var t="z"==e.dt.substring(e.dt.length-1).toLowerCase()?new Date(e.dt):new Date(e.dt+"Z"),i=new Date,n=t-i,a=Math.floor(n/l),d=Math.floor(n%l/s),c=Math.floor(n%s/r),g=Math.floor(n%r/o);0>n?e.elem.innerHTML="Draw has finished":(e.elem.innerHTML=a+"d ",e.elem.innerHTML+=d+"h ",e.elem.innerHTML+=c+"m ",e.elem.innerHTML+=g+"s")})}var n,a,o=1e3,r=60*o,s=60*r,l=24*s;this.setDraws=function(e){DGW.helpers.isArray(e)&&(n=e.filter(function(e){return t(e)}))},this.push=function(e){return e.elem&&e.dt?t(e)?(n.push(e),!0):!1:void 0},this.start=function(){i(),a=window.setInterval(i,1e3)},this.stop=function(){window.clearInterval(a)},this.setDraws(e),this.start()},DGW.helpers.drawsTimer=new DGW.helpers.drawsTimerConstr([]),DGW.helpers.checkImagesForSrc=function(e){return e?e:DGW.global.widgetPathName+"imgs/avatar-placeholder.png"},DGW.helpers.centerWindowPopup=function(e,t,i,n,a,o){var r,s;s=o?o:DGW.helpers.createCenteredWindow(t,i,n),s.location.href=e,window.focus&&s.focus(),r=window.setInterval(function(){s.closed&&(clearInterval(r),s=null,a&&a(),DGW.global.api.requests.getUser())},50)},DGW.helpers.createCenteredWindow=function(e,t,i){var n=void 0!=window.screenLeft?window.screenLeft:screen.left,a=void 0!=window.screenTop?window.screenTop:screen.top,o=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,r=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,s=o/2-t/2+n,l=r/2-i/2+a;return window.open("",e,"menubar=no,location=no,resizable=no,scrollbars=no,status=no, width="+t+", height="+i+", top="+l+", left="+s)},DGW.helpers.getDateFromNow=function(e){function t(t,i){t="z"==t.substring(t.length-1).toLowerCase()?t:t+"Z",t=new Date(t),!i&&(i=(new Date).getTime()),i instanceof Date&&(i=i.getTime()),t instanceof Date&&(t=t.getTime());var n,a,o,r=i-t;for(a=-1,o=d.length;++a<o;)if(n=d[a],r<n[0])return n[2]==e?n[1]:Math.round(r/n[2])+" "+n[1]}var i=1e3,n=60*i,a=60*n,o=24*a,r=7*o,s=365*o,l=s/12,d=[[.7*n,"just now"],[1.5*n,"a minute ago"],[60*n,"minutes ago",n],[1.5*a,"an hour ago"],[o,"hours ago",a],[2*o,"yesterday"],[7*o,"days ago",o],[1.5*r,"a week ago"],[l,"weeks ago",r],[1.5*l,"a month ago"],[s,"months ago",l],[1.5*s,"a year ago"],[Number.MAX_VALUE,"years ago",s]];return t}(),DGW.helpers.dateDiff=function(e){return e="z"==e.substring(e.length-1).toLowerCase()?e:e+"Z",new Date(e)-new Date},DGW.helpers.getURLParameter=function(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var i=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),n=i.exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null},DGW.helpers.console=function(){return{log:function(){DGW.global.debug&&console.log.apply(console,Array.prototype.slice.call(arguments))},info:function(){DGW.global.debug&&console.info.apply(console,Array.prototype.slice.call(arguments))},warn:function(){DGW.global.debug&&console.warn.apply(console,Array.prototype.slice.call(arguments))},error:function(){DGW.global.debug&&console.error.apply(console,Array.prototype.slice.call(arguments))}}}(),DGW.helpers.errorParser=function(e){e=JSON.parse(e);var t=[],i=[];if(!e.ModelState)return{messages:e.Message};for(var n in e.ModelState)DGW.helpers.isArray(e.ModelState[n])&&(e.ModelState[n].forEach(function(e){t.push(e)}),i.push(n.substr(6).toLowerCase()));return{messages:t,inputs:i}},DGW.helpers.insertAfter=function(e,t,i){t?t.parentNode.insertBefore(e,t.nextSibling):i&&i.appendChild(e)},DGW.templates.sideWidgetCore='<div id="dg-side-widget-wrapper"><div class="dg-side-widget-body"><div class="dg-side-widget-content dg-o-w-authorized"><div class="dg-side-widget-content-inner"><div class="dg-side-section"><div class="dg-side-img-holder no-border"><img id="dg-side-widget-userpic" class="avatar" src="" /></div><div class="dg-side-expanded"><h4 id="dg-side-widget-name">Name Surname Whatever</h4><h6><span id="dg-side-points">00</span> | <span id="dg-side-credits">00</span></h6></div></div><div class="dg-side-collapsed"><p><span id="dg-side-points-collapsed"></span> pts</p></div><div class="dg-side-expanded"><p>Earned: <span>15</span> pts | left: <span>5</span>pts</p></div></div></div><div class="dg-side-widget-content dg-o-w-anonymous"><div class="dg-side-widget-content-inner"><div class="dg-side-section"><div class="dg-side-img-holder"><img class="dg-side-prize" src="" alt="Prize" /></div><div class="dg-side-expanded"><p id="dg-side-widget-prize-desc"></p></div></div><div class="dg-side-collapsed"><div class="dg-side-cta">Get it</div></div><div class="dg-side-expanded"><div class="dg-side-cta">Get the prize</div></div></div></div><div class="dg-side-widget-resizer"></div></div></div>',DGW.templates.mainWidgetCore='<div id="dg-o-w-wrapper"><div class="dg-o-w-overlay"><div class="dg-o-w-body"><div class="dg-o-w-body-wrapper"><div class="dg-o-w-header"><div class="dg-o-w-logo"></div><div class="dg-o-w-menu"><ul><li class="earn-menu-item">Earn</li><li class="draws-menu-item">Draws & Games</li><li class="activities-menu-item">Activities</li></ul></div><div class="dg-o-w-menu-profile"><div class="profile-menu-item"><img class="avatar" src="" /><div class="profile-menu-unauthorized"><div><h4>Hello, guest!</h4><div class="dg-o-w-login-dropdown"><a href="#">Log in by email</a><div class="dg-o-w-email-login-form"><form class="shown" id="dg-o-w-form-login-top"><label>Email <input type="email" placeholder="mail@mail.com" /></label><label>Password <input type="password" /></label><input type="submit" value="Sign In" /><a href="#" class="">Forgot your password?</a></form><form id="dg-o-w-form-forgot-top"><div><label>Email <input type="email" placeholder="mail@mail.com" /></label><input type="submit" value="Request new password" /><a href="#" class="">&larr; Back</a></div><p class="success-message">Email was sent</p></form></div></div></div></div><div class="profile-menu-authorized"><div><h4>Hello, Paul!</h4><p><span id="dg-o-w-points">25</span> | <span id="dg-o-w-credits">115.25</span></p></div></div></div></div></div><div class="dg-o-w-content"><div class="dg-o-w-section"><section></section><footer class="dg-o-w-footer-login"><div class="footer-section footer-section-step-1"><div class="inline-part"><h3>Log in with Facebook and get +<span id="dg-o-w-login-fb-reward" class="dg-o-w-rewarded-action">30</span> points</h3></div><div class="inline-part"><a href="#" id="dg-o-w-footer-fb-connect" class="btn-radius btn-large btn-brand">Facebook</a></div><div class="inline-part"><p>or</p></div><div class="inline-part"><a id="dg-o-w-footer-email-login" href="#" class="btn-radius btn-large btn-white">Sign up with email</a></div></div><div class="footer-section footer-section-step-2"><div><a id="dg-o-w-footer-login-select" href="#" class="btn-back-footer">&larr; Back</a><form id="dg-o-w-footer-signup-email"><div class="inline-part"><label>Name <input type="text" placeholder="First Name" /></label></div><div class="inline-part"><label>Email <input type="email" placeholder="mail@mail.com" /></label></div><div class="inline-part"><label>&nbsp; <input class="btn-dg-o-w-outline" type="submit" value="Submit" /></label></div></form></div></div><div class="footer-section footer-section-step-3"><div><a id="dg-o-w-footer-login-select-2" href="#" class="btn-back-footer">&larr; Back</a><form id="dg-o-w-footer-signup-pass"><div class="inline-part"><label>Password <input type="password" /></label></div><div class="inline-part"><label>&nbsp; <input class="btn-dg-o-w-outline" type="submit" value="Sign Up" /></label></div></form></div></div></footer></div></div></div><div class="dg-o-w-close">&times;</div><div class="dg-o-w-spinner"><div class="sk-circle1 sk-circle"></div><div class="sk-circle2 sk-circle"></div><div class="sk-circle3 sk-circle"></div><div class="sk-circle4 sk-circle"></div><div class="sk-circle5 sk-circle"></div><div class="sk-circle6 sk-circle"></div><div class="sk-circle7 sk-circle"></div><div class="sk-circle8 sk-circle"></div><div class="sk-circle9 sk-circle"></div><div class="sk-circle10 sk-circle"></div><div class="sk-circle11 sk-circle"></div><div class="sk-circle12 sk-circle"></div></div></div></div></div>',DGW.templates.earnMain='<div class="dg-o-w-submenu"><ul><li class="dg-o-w-active">All</li><li>Share</li><li>Watch</li><li>Visit</li><li>Download</li><li>Invite</li></ul><select><option>All sponsors</option><option>Coca-Cola</option><option>Nike</option><option>Telco</option></select></div><div class="dg-o-w-section-content"><h3>Complete the tasks and earn +<span></span> points today</h3><ul class="dg-o-w-list-offers"></ul></div>',DGW.templates.drawsMain='<div class="dg-o-w-submenu"><ul><li class="dg-o-w-active" id="dg-o-w-show-all-draws">All draws</li><li id="dg-o-w-show-finished-soon">Finished soon</li><li id="dg-o-w-show-my-draws">My draws</li><li id="dg-o-w-show-games">Games</li></ul><label class="checkbox-slider">Show finished draws <input id="dg-o-w-show-expired" type="checkbox" class="ios-switch bigswitch" /><div><div></div></div></label></div><div class="dg-o-w-section-content"><div class="dg-o-w-draws-active"><ul class="dg-o-w-list-draws"></ul></div><div class="dg-o-w-draws-no-active"><h2>Sorry, but there are no draws running at the moment.</h2><br/><div class="dg-o-w-draws-refresh"></div></div><div class="dg-o-w-draws-no-in-draws"><h2>Seems like you don\'t playing any current draw :(</h2></div></div>',DGW.templates.profileMain='<div class="dg-o-w-profile"><div class="dg-o-w-left-side"><div class="dg-o-w-image-holder"><img id="profileImage" class="avatar" src="" /></div></div><div class="dg-o-w-right-side"><div class="dg-o-w-profile-top"><div class="dg-o-w-float-left"><h3 id="profileName">Captain Deadpool</h3><h5><span id="dg-o-w-badges-earned-amount"></span> badges</h5></div><div class="dg-o-w-float-right"><div class="dg-o-w-profile-points"><h3>115</h3><h5>20</h5></div><div class="dg-o-w-profile-credits"><h3>215.20</h3><h5>25.15</h5></div></div></div><div class="dg-o-w-profile-earnings-info"><p class="color-brand-light">Today earned: <span>15</span> pts | left: <span>5</span>pts</p><p id="dg-o-w-login-fb-text">Get +<span class="dg-o-w-rewarded-action" id="dg-o-w-login-fb-reward">50</span> additional points by adding your other accounts from <a href="#" class="dg-o-w-fb-connect"></a></p></div><div class="dg-o-w-profile-progress"><div style="width:35%;"></div></div><div class="dg-o-w-profile-bottom"><div class="dg-o-w-profile-invite dg-o-w-float-left"></div><div class="dg-o-w-profile-signout dg-o-w-float-right"><p class="color-brand-light"><a id="dg-o-w-sign-out-btn" href="#">Sign out</a></p></div></div></div></div><div class="dg-o-w-section-content content-static"><h3>Badges</h3><div class="dg-o-w-badges-holder"><ul></ul></div></div>',DGW.templates.loginMain='<div class="dg-o-w-login"><div class="dg-o-w-left-side"><div class="dg-o-w-image-holder"><div class="dg-o-w-brand-player-image"></div></div></div><div class="dg-o-w-right-side"><h1>Win exclusive prizes handling simple tasks</h1><div class="dg-o-w-login-winners"><img class="avatar" src="" /><div><h4><span></span> has won a signed t-shirt!</h4><h5>Sign up and get your own prize now</h5></div></div></div></div>',DGW.templates.activitiesMain='<div class="dg-o-w-submenu"><ul><li class="toggle-section-height"><div></div></li><li class="dg-o-w-active">Leaderboard</li></ul></div><div class="dg-o-w-activities"><div class="dg-o-w-activity-slider-holder"><div class="dg-o-w-activity-slider-controls"><div class="dg-o-w-activity-slider-prev dg-o-w-arrow dg-o-w-arrow-left"></div><div class="dg-o-w-activity-slider-next dg-o-w-arrow dg-o-w-arrow-right"></div></div><div class="dg-o-w-activity-slider"><ul></ul></div></div></div><div class="dg-o-w-section-content"><div class="dg-o-w-activities-header"><p class="dg-o-w-float-left">Activities for today</p><select id="dg-o-w-activities-filter" class="dg-o-w-float-right"><option value="all-activities">All activities</option><option value="my-activities">My Activities</option></select></div><div class="dg-o-w-activities-holder"><ul></ul></div></div>',DGW.templates.videoHolder='<div class="dg-o-w-video-holder"><div id="dg-o-w-video-playing"></div><div class="dg-o-w-video-text"><span></span></div></div>',DGW.templates.notificationHolder='<div class="dg-o-w-notification-holder"><ul></ul><div class="dg-o-w-notification-close">&times;</div></div>',DGW.global.elements.documentBody=document.body,DGW.side.elements.widget=document.createElement("div"),DGW.side.elements.widget.id="dg-side-widget",DGW.side.elements.widget.innerHTML=DGW.templates.sideWidgetCore,DGW.side.elements.widgetBody=DGW.side.elements.widget.querySelector(".dg-side-widget-body"),DGW.main.elements.widget=document.createElement("div"),DGW.main.elements.widget.id="dg-o-w",DGW.main.elements.widget.innerHTML=DGW.templates.mainWidgetCore,DGW.main.elements.widgetBody=DGW.main.elements.widget.querySelector(".dg-o-w-body"),DGW.main.elements.menuItems={earn:DGW.main.elements.widget.querySelector(".dg-o-w-menu .earn-menu-item"),draws:DGW.main.elements.widget.querySelector(".dg-o-w-menu .draws-menu-item"),activities:DGW.main.elements.widget.querySelector(".dg-o-w-menu .activities-menu-item"),profile:DGW.main.elements.widget.querySelector(".dg-o-w-menu-profile .profile-menu-item img"),profileRegistered:DGW.main.elements.widget.querySelector(".dg-o-w-menu-profile .profile-menu-item .profile-menu-authorized")},DGW.main.elements.widgetContent=DGW.main.elements.widget.querySelector(".dg-o-w-content .dg-o-w-section section"),DGW.main.elements.widgetWrapper=DGW.main.elements.widget.querySelector(".dg-o-w-body-wrapper"),DGW.main.elements.loginFooter=DGW.main.elements.widget.querySelector(".dg-o-w-footer-login"),DGW.main.elements.loginMenuButton=DGW.main.elements.widget.querySelector(".dg-o-w-login-dropdown a"),DGW.main.elements.pages.earnMain=document.createElement("div"),DGW.main.elements.pages.earnMain.innerHTML=DGW.templates.earnMain,DGW.main.elements.pages.drawsMain=document.createElement("div"),DGW.main.elements.pages.drawsMain.innerHTML=DGW.templates.drawsMain,DGW.main.elements.pages.activitiesMain=document.createElement("div"),DGW.main.elements.pages.activitiesMain.innerHTML=DGW.templates.activitiesMain,DGW.main.elements.pages.profileMain=document.createElement("div"),DGW.main.elements.pages.profileMain.innerHTML=DGW.templates.profileMain,DGW.main.elements.pages.loginMain=document.createElement("div"),DGW.main.elements.pages.loginMain.innerHTML=DGW.templates.loginMain,DGW.main.elements.pages.singleDraw=document.createElement("div"),DGW.main.elements.pages.videoHolder=document.createElement("div"),DGW.main.elements.pages.videoHolder.innerHTML=DGW.templates.videoHolder,DGW.main.elements.pages.notificationHolder=document.createElement("div"),DGW.main.elements.pages.notificationHolder.innerHTML=DGW.templates.notificationHolder,DGW.main.elements.pages.notificationHolder=DGW.main.elements.pages.notificationHolder.querySelector("div"),DGW.main.elements.activitiesSliderParent=DGW.main.elements.pages.activitiesMain.querySelector(".dg-o-w-activities"),DGW.main.methods.showWidget=function(){DGW.main.shown=!0,DGW.helpers.removeClass(DGW.main.elements.widget,"hiding"),DGW.global.elements.documentBody.appendChild(DGW.main.elements.widget),""===DGW.main.currentState&&DGW.main.methods.changeMainState("earn")},DGW.main.methods.hideWidget=function(){DGW.main.shown=!1,DGW.helpers.addClass(DGW.main.elements.widget,"hiding"),setTimeout(function(){DGW.global.elements.documentBody.removeChild(DGW.main.elements.widget)},310)},DGW.main.methods.loadingStarted=function(){DGW.helpers.addClass(DGW.main.elements.widgetBody,"dg-o-w-loading")},DGW.main.methods.loadingFinished=function(){DGW.helpers.removeClass(DGW.main.elements.widgetBody,"dg-o-w-loading")},DGW.side.methods.showWidget=function(){DGW.global.elements.documentBody.appendChild(DGW.side.elements.widget)},DGW.side.methods.hideWidget=function(){DGW.global.elements.documentBody.removeChild(DGW.side.elements.widget)},DGW.global.methods.authorize=function(){DGW.helpers.addClass(DGW.main.elements.widgetBody,"authorized"),DGW.global.authorized=!0,DGW.helpers.addClass(DGW.side.elements.widgetBody,"dg-o-w-authorized"),"profile"===DGW.main.currentState?DGW.main.methods.changeMainState("profile"):"draws"===DGW.main.currentState?DGW.global.api.requests.getDraws():"earn"===DGW.main.currentState&&DGW.global.api.requests.getUserOffers(),DGW.global.api.requests.getUserActions()},DGW.global.methods.unAuthorize=function(){DGW.helpers.removeClass(DGW.main.elements.widgetBody,"authorized"),DGW.helpers.removeClass(DGW.side.elements.widgetBody,"dg-o-w-authorized"),DGW.global.authorized=!1,"profile"===DGW.main.currentState&&DGW.main.methods.changeMainState("profile"),DGW.main.methods.resetStates()},DGW.global.methods.init=function(){DGW.side.methods.initEvents(),DGW.main.methods.initEvents(),DGW.main.elements.widgetWrapper.appendChild(DGW.main.elements.pages.notificationHolder),DGW.global.userStats.imageUrl=DGW.helpers.checkImagesForSrc(),DGW.global.userStats.name="Guest",DGW.global.userStats.facebookId=null,DGW.global.userStats.pointsC=0,DGW.global.userStats.pointsP=0,DGW.global.userStats.creditsC=0,DGW.global.userStats.creditsP=0,DGW.global.userStats.badges={all:{},earned:{}},DGW.global.api.requests.getDraws(),DGW.global.api.requests.getActions(),DGW.global.api.requests.getUser(),DGW.global.safariFixFirstOpen&&DGW.main.methods.showWidget()},DGW.global.methods.safariFixInit=function(){DGW.side.methods.initSafariFixEvents()},DGW.main.methods.showNotificationBar=function(e){e||(e="success"),DGW.helpers.addClass(DGW.main.elements.pages.notificationHolder,e)},DGW.main.methods.hideNotificationBar=function(){DGW.helpers.removeClass(DGW.main.elements.pages.notificationHolder,"success"),DGW.helpers.removeClass(DGW.main.elements.pages.notificationHolder,"error")},DGW.side.methods.initEvents=function(){DGW.global.launched||(DGW.side.methods.showWidget(),DGW.global.launched=!0);var e,t=DGW.side.elements.widgetBody,i=t.querySelector(".dg-side-widget-resizer"),n=Array.prototype.slice.call(t.querySelectorAll(".dg-side-cta")),a=t.querySelector(".dg-side-widget-content.dg-o-w-authorized .dg-side-section");n.push(a),t.removeEventListener("click",DGW.global.api.requests.safariFix),i.addEventListener("click",function(){DGW.helpers.hasClass(t,"dg-side-widget-expanded")?DGW.helpers.removeClass(t,"dg-side-widget-expanded"):DGW.helpers.addClass(t,"dg-side-widget-expanded")}),n.forEach(function(e){e.addEventListener("click",function(){DGW.main.shown?DGW.main.methods.hideWidget():DGW.main.methods.showWidget()})}),e=window.setInterval(function(){DGW.global.cache.last.prize&&(window.clearInterval(e),t.querySelector(".dg-side-prize").src=DGW.global.cache.last.prize.ImageUrl,t.querySelector("#dg-side-widget-prize-desc").innerHTML=DGW.global.cache.last.prize.Title)},100)},DGW.side.methods.initSafariFixEvents=function(){var e,t=DGW.side.elements.widgetBody;DGW.side.methods.showWidget(),t.addEventListener("click",DGW.global.api.requests.safariFix),e=window.setInterval(function(){DGW.global.cache.last.prize&&(window.clearInterval(e),t.querySelector(".dg-side-prize").src=DGW.global.cache.last.prize.ImageUrl,t.querySelector("#dg-side-widget-prize-desc").innerHTML=DGW.global.cache.last.prize.Title)},100)},DGW.main.methods.checkSectionHeight=function(){var e=DGW.main.elements.widgetBody.querySelector(".dg-o-w-section"),t=DGW.main.elements.widgetBody.querySelector(".dg-o-w-section-content");e.querySelector(".dg-o-w-submenu")&&(DGW.helpers.addClass(t,"dg-o-w-submenu-only"),DGW.helpers.removeClass(t,"dg-o-w-submenu-activities"),e.querySelector(".dg-o-w-activity-slider-holder")&&!DGW.helpers.hasClass(e.querySelector(".dg-o-w-activities"),"collapsed")&&(DGW.helpers.addClass(t,"dg-o-w-submenu-activities"),DGW.helpers.removeClass(t,"dg-o-w-submenu-only")))},DGW.main.methods.changeMainState=function(e){for(item in DGW.main.elements.menuItems)DGW.helpers.removeClass(DGW.main.elements.menuItems[item],"dg-o-w-active"),DGW.helpers.removeClass(DGW.main.elements.menuItems.profile.parentNode,"dg-o-w-active"),item===e&&("profile"===e?DGW.helpers.addClass(DGW.main.elements.menuItems[item].parentNode,"dg-o-w-active"):DGW.helpers.addClass(DGW.main.elements.menuItems[item],"dg-o-w-active"));switch(DGW.main.elements.widgetContent.children.length>0&&Array.prototype.slice.call(DGW.main.elements.widgetContent.children).forEach(function(e){DGW.main.elements.widgetContent.removeChild(e)}),"draws"!==DGW.main.currentState&&DGW.helpers.drawsTimer.setDraws([]),DGW.helpers.removeClass(DGW.main.elements.widgetBody,"profile-anon"),e){case"earn":DGW.global.authorized?DGW.global.api.requests.getUserOffers():DGW.global.api.requests.getOffers(),DGW.main.elements.widgetContent.appendChild(DGW.main.elements.pages.earnMain);break;case"draws":"draws"!==DGW.main.currentState&&(DGW.global.api.requests.getDraws(),DGW.main.methods.drawSubmenuReset()),DGW.main.elements.widgetContent.appendChild(DGW.main.elements.pages.drawsMain);break;case"activities":"all-activities"===DGW.main.elements.pages.activitiesMain.querySelector("#dg-o-w-activities-filter").value?DGW.global.api.requests.getAllActivities():DGW.global.api.requests.getUserActivities(),DGW.global.api.requests.getLeaderboard(),DGW.main.elements.widgetContent.appendChild(DGW.main.elements.pages.activitiesMain);break;case"profile":DGW.global.authorized?(DGW.main.elements.widgetContent.appendChild(DGW.main.elements.pages.profileMain),DGW.global.api.requests.getUser(),DGW.global.api.requests.getAllBadges()):(DGW.helpers.addClass(DGW.main.elements.widgetBody,"profile-anon"),DGW.main.elements.widgetContent.appendChild(DGW.main.elements.pages.loginMain))}Array.prototype.slice.call(DGW.main.elements.widgetContent.querySelectorAll(".avatar")).forEach(function(e){e.src=DGW.helpers.checkImagesForSrc(e.getAttribute("src"))}),DGW.main.methods.hideNotificationBar(),DGW.main.currentState=e,DGW.main.methods.setRewardedActions(),DGW.main.methods.checkSectionHeight()},DGW.main.methods.initEvents=function(){DGW.main.methods.fillDefaultValues(),Array.prototype.slice.call(DGW.main.elements.widget.querySelectorAll(".avatar")).forEach(function(e){e.src=DGW.helpers.checkImagesForSrc(e.getAttribute("src"))}),DGW.main.elements.widget.querySelector(".dg-o-w-close").addEventListener("click",DGW.main.methods.hideWidget);for(item in DGW.main.elements.menuItems)DGW.main.elements.menuItems[item].addEventListener("click",function(e){return function(){"profileRegistered"==e&&(e="profile"),DGW.main.methods.changeMainState(e)}}(item));DGW.main.elements.loginMenuButton.addEventListener("click",function(e){e.preventDefault();var t=this,i=t.parentNode.querySelector(".dg-o-w-email-login-form");DGW.helpers.hasClass(t.parentNode,"shown")?(DGW.helpers.removeClass(t.parentNode,"shown"),setTimeout(function(){DGW.helpers.removeClass(i,"visible")},310)):(DGW.helpers.addClass(i,"visible"),setTimeout(function(){DGW.helpers.addClass(t.parentNode,"shown")},0))});var e=DGW.main.elements.widgetBody.querySelector("#dg-o-w-form-login-top"),t=DGW.main.elements.widgetBody.querySelector("#dg-o-w-form-forgot-top");e.addEventListener("submit",function(e){e.preventDefault();var t=this.querySelector("[type=email]").value,i=this.querySelector("[type=password]").value;DGW.global.api.requests.signIn({Email:t,Password:i},function(){DGW.helpers.removeClass(DGW.main.elements.loginMenuButton.parentNode,"shown")},function(e){DGW.main.methods.notificationConstructor(DGW.helpers.errorParser(e).messages,"error")})}),t.addEventListener("submit",function(e){e.preventDefault();var t=this,i=t.querySelector("[type=email]").value;DGW.global.api.requests.forgotPass(i,function(){DGW.main.methods.notificationConstructor("Check your email to confirm the new password.")},function(e){DGW.main.methods.notificationConstructor(DGW.helpers.errorParser(e).messages,"error")})}),e.querySelector("a").addEventListener("click",function(i){i.preventDefault(),DGW.helpers.removeClass(e,"shown"),DGW.helpers.addClass(t,"shown")}),t.querySelector("a").addEventListener("click",function(i){i.preventDefault(),DGW.helpers.removeClass(t,"shown"),DGW.helpers.addClass(e,"shown")}),DGW.main.elements.pages.activitiesMain.querySelector(".toggle-section-height").addEventListener("click",function(){DGW.helpers.hasClass(this,"collapsed")?(DGW.helpers.removeClass(DGW.main.elements.activitiesSliderParent,"collapsed"),DGW.helpers.removeClass(this,"collapsed")):(DGW.helpers.addClass(DGW.main.elements.activitiesSliderParent,"collapsed"),DGW.helpers.addClass(this,"collapsed")),DGW.main.methods.checkSectionHeight()}),DGW.main.elements.pages.activitiesMain.querySelector("#dg-o-w-activities-filter").addEventListener("change",function(){"all-activities"===this.value?DGW.global.api.requests.getAllActivities():DGW.global.api.requests.getUserActivities()}),DGW.main.elements.loginFooter.querySelector("#dg-o-w-footer-email-login").addEventListener("click",function(e){e.preventDefault(),DGW.helpers.addClass(DGW.main.elements.loginFooter,"email-sign-up")}),DGW.main.elements.loginFooter.querySelector("#dg-o-w-footer-login-select").addEventListener("click",function(e){e.preventDefault(),DGW.helpers.removeClass(DGW.main.elements.loginFooter,"email-sign-up")}),DGW.main.elements.loginFooter.querySelector("#dg-o-w-footer-login-select-2").addEventListener("click",function(e){
e.preventDefault(),DGW.helpers.removeClass(DGW.main.elements.loginFooter,"password")}),function(){var e={};DGW.main.elements.loginFooter.querySelector("#dg-o-w-footer-signup-email").addEventListener("submit",function(t){t.preventDefault();var i=this.querySelector("[type=text]").value,n=this.querySelector("[type=email]").value;if(""!=i&&""!=n)e.Username=i,e.Email=n,DGW.helpers.addClass(DGW.main.elements.loginFooter,"password");else{var a=[];""==i&&a.push("Name is required field"),""==n&&a.push("Email is required"),DGW.main.methods.notificationConstructor(a,"error")}}),DGW.main.elements.loginFooter.querySelector("#dg-o-w-footer-signup-pass").addEventListener("submit",function(t){t.preventDefault();var i=this.querySelector("[type=password]").value;e.Password=i,DGW.global.api.requests.signUp(e,function(){DGW.helpers.removeClass(DGW.main.elements.loginFooter,"email-sign-up"),DGW.helpers.removeClass(DGW.main.elements.loginFooter,"password")},function(e){DGW.main.methods.notificationConstructor(DGW.helpers.errorParser(e).messages,"error")})})}(),DGW.main.elements.loginFooter.querySelector("#dg-o-w-footer-fb-connect").addEventListener("click",function(e){e.preventDefault(),DGW.global.api.requests.connectFB()}),DGW.main.elements.pages.drawsMain.querySelector("#dg-o-w-show-expired").addEventListener("change",function(e){this.checked?(DGW.helpers.addClass(DGW.main.elements.widgetBody,"draws-expired"),DGW.main.settings.hiddenDrawsShow=!0):(DGW.helpers.removeClass(DGW.main.elements.widgetBody,"draws-expired"),DGW.main.settings.hiddenDrawsShow=!1)}),DGW.main.elements.pages.drawsMain.querySelector(".dg-o-w-draws-refresh").addEventListener("click",function(){DGW.global.api.requests.getDraws()}),function(){function e(){a.forEach(function(e){DGW.helpers.removeClass(e,"dg-o-w-active")})}function t(){n.checked=!1,DGW.helpers.removeClass(DGW.main.elements.widgetBody,"draws-expired"),n.parentNode.style.display="none"}function i(){DGW.main.settings.hiddenDrawsShow&&(n.checked=!0,DGW.helpers.addClass(DGW.main.elements.widgetBody,"draws-expired")),n.parentNode.style.display="block"}var n=DGW.main.elements.pages.drawsMain.querySelector("#dg-o-w-show-expired"),a=Array.prototype.slice.call(DGW.main.elements.pages.drawsMain.querySelectorAll(".dg-o-w-submenu ul li"));a.forEach(function(n){n.addEventListener("click",function(){switch(e(),DGW.helpers.addClass(this,"dg-o-w-active"),this.id){case"dg-o-w-show-all-draws":DGW.main.cache.drawsList.sort(function(e,t){return new Date(t.EndDate)-new Date(e.EndDate)}),i(),DGW.main.methods.drawsConstructor(DGW.main.cache);break;case"dg-o-w-show-finished-soon":var n=DGW.main.cache.drawsList.filter(function(e){return DGW.helpers.dateDiff(e.EndDate)<=0}),a=DGW.main.cache.drawsList.filter(function(e){return DGW.helpers.dateDiff(e.EndDate)>0}).sort(function(e,t){return new Date(e.EndDate)-new Date(t.EndDate)});DGW.main.cache.drawsList=a.concat(n),t(),DGW.main.methods.drawsConstructor(DGW.main.cache,"close-to-finish");break;case"dg-o-w-show-my-draws":var o=[];DGW.main.cache.drawsEntries.forEach(function(e){DGW.main.cache.drawsList.filter(function(t){t.DrawId==e.DrawId&&o.push(t)})}),DGW.main.cache.drawsList=DGW.main.cache.drawsList.sort(function(e,t){return new Date(t.EndDate)-new Date(e.EndDate)}),i(),DGW.main.methods.drawsConstructor({drawsList:o,drawsEntries:DGW.main.cache.drawsEntries},"my-draws");break;case"dg-o-w-show-games":t(),DGW.main.methods.gamesConstructor()}})}),DGW.main.methods.drawSubmenuReset=function(){e(),DGW.helpers.addClass(DGW.main.elements.pages.drawsMain.querySelector("#dg-o-w-show-all-draws"),"dg-o-w-active")}}(),DGW.main.elements.pages.profileMain.querySelector("#dg-o-w-login-fb-text").addEventListener("click",function(){DGW.global.api.requests.connectFB(function(){DGW.global.api.requests.getUser()})}),DGW.main.elements.pages.profileMain.querySelector("#dg-o-w-sign-out-btn").addEventListener("click",function(e){e.preventDefault(),DGW.global.api.requests.signOut()}),DGW.main.elements.pages.notificationHolder.querySelector(".dg-o-w-notification-close").addEventListener("click",function(){DGW.main.methods.hideNotificationBar()})},DGW.main.methods.resetStates=function(){DGW.main.elements.widgetBody.querySelector(".dg-o-w-menu-profile .profile-menu-item img").src=DGW.helpers.checkImagesForSrc(),DGW.main.elements.pages.activitiesMain.querySelector("#dg-o-w-activities-filter").value="all-activities",DGW.helpers.removeClass(DGW.main.elements.loginFooter,"email-sign-up"),DGW.helpers.removeClass(DGW.main.elements.loginFooter,"password"),DGW.main.methods.fillDefaultValues(),DGW.main.cache.drawsEntries=[]},DGW.main.methods.fillDefaultValues=function(){var e=DGW.main.elements.pages.drawsMain.querySelector("#dg-o-w-show-expired");getWinnerInterval=setInterval(function(){if(DGW.global.cache.last.winner){var e=DGW.main.elements.pages.loginMain.querySelector(".dg-o-w-login-winners");e.querySelector("img").src=DGW.global.cache.last.winner.ImageUrl,e.querySelector("h4 span").innerHTML=DGW.global.cache.last.winner.UserName,clearInterval(getWinnerInterval)}},50),DGW.main.settings.hiddenDrawsShow?(e.checked=!0,DGW.helpers.addClass(DGW.main.elements.widgetBody,"draws-expired")):(e.checked=!1,DGW.helpers.removeClass(DGW.main.elements.widgetBody,"draws-expired"))},DGW.main.methods.setRewardedActions=function(e,t){e||(e=DGW.main.elements.widget),t||(t=DGW.main.cache.rewardedActions),e.querySelector(".dg-o-w-rewarded-action")&&t.length>0&&(e.querySelector("#dg-o-w-login-fb-reward")&&t.filter(function(e){return"FacebookConnect"==e.Type}).length>0&&(e.querySelector("#dg-o-w-login-fb-reward").innerHTML=t.filter(function(e){return"FacebookConnect"==e.Type})[0].PointsReward),e.querySelector("#dg-o-w-friends-sign-up-reward")&&t.filter(function(e){return"FriendSignUp"==e.Type}).length>0&&(e.querySelector("#dg-o-w-friends-sign-up-reward").innerHTML=t.filter(function(e){return"FriendSignUp"==e.Type})[0].PointsReward),e.querySelector("#dg-o-w-facebook-like-reward")&&(t.filter(function(e){return"FacebookShare"==e.Type}).length>0?e.querySelector("#dg-o-w-facebook-like-reward").innerHTML=" and get +"+t.filter(function(e){return"FacebookShare"==e.Type})[0].PointsReward+" points":e.querySelector("#dg-o-w-facebook-like-reward").innerHTML=""),e.querySelector("#dg-o-w-tweeter-like-reward")&&(t.filter(function(e){return"TwitterShare"==e.Type}).length>0?e.querySelector("#dg-o-w-tweeter-like-reward").innerHTML=" and get +"+t.filter(function(e){return"TwitterShare"==e.Type})[0].PointsReward+" points":e.querySelector("#dg-o-w-tweeter-like-reward").innerHTML=""))},DGW.main.methods.profileSetData=function(e){var t=DGW.main.elements.pages.profileMain,i=DGW.main.elements.widgetBody,n=DGW.side.elements.widgetBody,a=[i.querySelector(".dg-o-w-menu-profile .profile-menu-item img"),t.querySelector("#profileImage"),n.querySelector("#dg-side-widget-userpic")],o=[i.querySelector(".dg-o-w-menu-profile .profile-menu-authorized h4"),t.querySelector("#profileName"),n.querySelector("#dg-side-widget-name")],r=(t.querySelector("#profileFriendsAmount"),{confirmed:[i.querySelector("#dg-o-w-points"),t.querySelector(".dg-o-w-profile-points h3"),n.querySelector("#dg-side-points"),n.querySelector("#dg-side-points-collapsed")],pending:[t.querySelector(".dg-o-w-profile-points h5")]}),s={confirmed:[i.querySelector("#dg-o-w-credits"),t.querySelector(".dg-o-w-profile-credits h3"),n.querySelector("#dg-side-credits")],pending:[t.querySelector(".dg-o-w-profile-credits h5")]},l=t.querySelector("#dg-o-w-login-fb-text");a.forEach(function(t){t.src=e.ImageUrl||DGW.helpers.checkImagesForSrc(t.getAttribute("src"))}),DGW.global.userStats.imageUrl=e.ImageUrl||DGW.global.userStats.imageUrl,o.forEach(function(t){t.innerHTML=e.UserName}),DGW.global.userStats.name=e.UserName||DGW.global.userStats.name,DGW.global.userStats.facebookId=e.FacebookId,r.confirmed.forEach(function(t){t.innerHTML=e.Wallet.PointsConfirmed}),r.pending.forEach(function(t){t.innerHTML=e.Wallet.PointsPending}),s.confirmed.forEach(function(t){t.innerHTML=e.Wallet.CreditsConfirmed}),s.pending.forEach(function(t){t.innerHTML=e.Wallet.CreditsPending}),DGW.global.userStats.pointsC=e.Wallet.PointsConfirmed,DGW.global.userStats.pointsP=e.Wallet.PointsPending,DGW.global.userStats.creditsC=e.Wallet.CreditsConfirmed,DGW.global.userStats.creditsP=e.Wallet.CreditsPending,l&&null!==DGW.global.userStats.facebookId&&l.parentNode.removeChild(l)},DGW.main.methods.updateUserInfoBet=function(e,t){var i={confirmed:[DGW.main.elements.widgetBody.querySelector("#dg-o-w-points"),DGW.main.elements.pages.profileMain.querySelector(".dg-o-w-profile-points h3")],pending:[DGW.main.elements.pages.profileMain.querySelector(".dg-o-w-profile-points h5")]},n={confirmed:[DGW.main.elements.widgetBody.querySelector("#dg-o-w-credits"),DGW.main.elements.pages.profileMain.querySelector(".dg-o-w-profile-credits h3")],pending:[DGW.main.elements.pages.profileMain.querySelector(".dg-o-w-profile-credits h5")]},a=DGW.main.elements.widgetContent.querySelector(".dg-o-w-your-bet span");i.confirmed.forEach(function(e){e.innerHTML=t.Wallet.PointsConfirmed}),i.pending.forEach(function(e){e.innerHTML=t.Wallet.PointsPending}),n.confirmed.forEach(function(e){e.innerHTML=t.Wallet.CreditsConfirmed}),n.pending.forEach(function(e){e.innerHTML=t.Wallet.CreditsPending}),DGW.global.userStats.pointsC=t.Wallet.PointsConfirmed,DGW.global.userStats.pointsP=t.Wallet.PointsPending,DGW.global.userStats.creditsC=t.Wallet.CreditsConfirmed,DGW.global.userStats.creditsP=t.Wallet.CreditsPending,a&&(a.innerHTML=e.TicketsAmount||0)},DGW.main.methods.updateBadgesInfo=function(){function e(e,t){function n(){u.forEach(function(e){DGW.helpers.removeClass(e,"dg-o-w-active")})}function o(e){var t=u.indexOf(u.filter(function(e,t){return DGW.helpers.hasClass(e,"dg-o-w-active")})[0]);n(),"left"===e?t>0?DGW.helpers.addClass(u[t-1],"dg-o-w-active"):DGW.helpers.addClass(u[u.length-1],"dg-o-w-active"):t<u.length-1?DGW.helpers.addClass(u[t+1],"dg-o-w-active"):DGW.helpers.addClass(u[0],"dg-o-w-active")}var r='<div class="dg-o-w-submenu"><ul><li class="dg-o-w-back-draws">&larr; Back</li></ul></div>',s='<div class="dg-o-w-badge-single"><ul></ul><div class="dg-o-w-badge-single-left dg-o-w-arrow dg-o-w-arrow-left"></div><div class="dg-o-w-badge-single-right dg-o-w-arrow dg-o-w-arrow-right"></div></div>',l=document.createElement("div");l.className="dg-o-w-badge-single-page",l.innerHTML=r+s;var d=l.querySelector(".dg-o-w-badge-single ul"),c=l.querySelector(".dg-o-w-badge-single-left"),g=l.querySelector(".dg-o-w-badge-single-right"),u=[];e.forEach(function(e){var n=document.createElement("li");n.innerHTML='<div><img src="'+e.ImageUrl+'" /><h3>'+e.Title+"</h3><p>"+e.Description+"</p></div>",e.BadgeId===t&&(n.className="dg-o-w-active"),i.filter(function(t){return t.BadgeId==e.BadgeId}).length>0&&DGW.helpers.addClass(n,"dg-o-w-earned"),u.push(n),d.appendChild(n)}),l.querySelector(".dg-o-w-submenu li").addEventListener("click",function(){a.removeChild(l)}),c.addEventListener("click",function(){o("left")}),g.addEventListener("click",function(){o("right")}),a.appendChild(l)}var t=DGW.global.userStats.badges.all,i=DGW.global.userStats.badges.earned,n=DGW.main.elements.pages.profileMain,a=DGW.main.elements.widgetContent,o=n.querySelector(".dg-o-w-badges-holder ul");n.querySelector("#dg-o-w-badges-earned-amount").innerHTML=i.length,o.innerHTML="",t.forEach(function(n){var a=document.createElement("li");a.innerHTML='<img src="'+n.ImageUrl+'" alt=""/><p>'+n.Title+"</p>",i.filter(function(e){return e.BadgeId==n.BadgeId}).length>0&&DGW.helpers.addClass(a,"dg-o-w-earned"),a.addEventListener("click",function(){e(t,n.BadgeId)}),o.appendChild(a)})},DGW.main.methods.gamesConstructor=function(){var e=DGW.main.elements.pages.drawsMain.querySelector(".dg-o-w-list-draws");e.innerHTML="";var t=document.createElement("li");t.innerHTML="<h2>Sorry, but there are currently no games</h2>",e.appendChild(t),DGW.helpers.removeClass(DGW.main.elements.widgetBody,"no-active-draws"),DGW.helpers.removeClass(DGW.main.elements.widgetBody,"no-in-current-draws")},DGW.main.methods.drawsConstructor=function(e,t){var i=DGW.main.elements.pages.drawsMain.querySelector(".dg-o-w-list-draws");i.innerHTML="",DGW.global.activeDrawsExist=!1,e&&(e.drawsList.forEach(function(t){var n=document.createElement("li");n.id=t.DrawId,n.setAttribute("data-end-date",t.EndDate);var a=e.drawsEntries.filter(function(e){return e.DrawId==t.DrawId})[0];if(a)var o=a.TicketsAmount;n.innerHTML='<div class="dg-o-w-draw"><div class="dg-o-w-draw-image-holder"><img src="'+t.Prize.ImageUrl+'" /></div><div class="dg-o-w-draw-text"><h2 class="dg-o-w-draw-countdown">&nbsp;</h2><p>'+t.Prize.Description+"</p></div>"+(void 0!=a?'<div class="dg-o-w-draw-bet">You\'ve bet: <span>'+o+"</span> points</div>":"")+"</div>",DGW.helpers.drawsTimer.push({dt:t.EndDate,elem:n.querySelector(".dg-o-w-draw-countdown")})?DGW.global.activeDrawsExist=!0:(DGW.helpers.addClass(n,"expired"),n.querySelector(".dg-o-w-draw-countdown").innerHTML="Finished "+DGW.helpers.getDateFromNow(t.EndDate)),a&&a.IsWinner&&(DGW.helpers.addClass(n,"winner"),a.NeedToClaimPrize&&DGW.helpers.addClass(n,"claim-prize")),n.addEventListener("click",function(){DGW.main.methods.singleDrawConstructor(t.DrawId)}),i.appendChild(n)}),DGW.helpers.removeClass(DGW.main.elements.widgetBody,"no-active-draws"),DGW.helpers.removeClass(DGW.main.elements.widgetBody,"no-in-current-draws"),DGW.helpers.removeClass(DGW.main.elements.widgetBody,"close-to-finish"),DGW.global.activeDrawsExist?t&&"close-to-finish"==t&&DGW.helpers.addClass(DGW.main.elements.widgetBody,"close-to-finish"):t&&"my-draws"==t?DGW.helpers.addClass(DGW.main.elements.widgetBody,"no-in-current-draws"):t&&"close-to-finish"==t?DGW.helpers.addClass(DGW.main.elements.widgetBody,"close-to-finish"):DGW.helpers.addClass(DGW.main.elements.widgetBody,"no-active-draws")),DGW.main.methods.setRewardedActions()},DGW.main.methods.singleDrawConstructor=function(e){var t=DGW.main.cache.drawsList.filter(function(t){return t.DrawId===e})[0],i=DGW.main.cache.drawsEntries.filter(function(t){return t.DrawId===e})[0],n="active",a=DGW.main.elements.pages.singleDraw,o='<div class="dg-o-w-draw-left-side"><div class="prize-image"><div><img src="'+t.Prize.ImageUrl+'" /></div></div></div>',r='<div class="dg-o-w-draw-share dg-o-w-draw-auth-show"><a href="#" class="dg-o-w-like dg-o-w-facebook-like">Share <span class="dg-o-w-rewarded-action" id="dg-o-w-facebook-like-reward"></span></a><a href="#" class="dg-o-w-like dg-o-w-twitter-like">Tweet <span class="dg-o-w-rewarded-action" id="dg-o-w-tweeter-like-reward"></span></a></div>',s='<div class="dg-o-w-submenu"><ul><li class="dg-o-w-back-draws">&larr; Back</li></ul><div class="right-side">'+(void 0!=i&&i.IsWinner?"You've spent "+i.TicketsAmount+" points and won!":"")+"</div></div>",l=document.createElement("div");l.className="dg-o-w-users-done",DGW.main.elements.widgetContent.children.length>0&&DGW.main.elements.widgetContent.removeChild(DGW.main.elements.widgetContent.childNodes[0]),DGW.helpers.dateDiff(t.EndDate)<=0&&(DGW.helpers.console.info("isdrawn: ",t.IsDrawn),0==t.IsDrawn?(n="not-drawn",DGW.helpers.console.info("isdrawn: ",t.IsDrawn)):(n="drawn",DGW.helpers.console.info(t.IsDrawn),null==t.Winner&&(n="drawn-no-players"))),a.innerHTML=s+'<div class="dg-o-w-section-content"><div class="dg-o-w-single-draw">'+o+'<div class="dg-o-w-draw-right-side"><h2 class="dg-o-w-countdown">&nbsp;</h2><h5>'+t.Prize.Title+"</h5><p>"+t.Prize.Description+'</p><div class="dg-o-w-draw-bet-info dg-o-w-draw-auth-show"><div class="dg-o-w-your-bet">You\'ve bet <span>'+(i?i.TicketsAmount:0)+"</span> points</div></div>"+(DGW.helpers.dateDiff(t.EndDate)>0?'<h2 class="dg-o-w-draw-login-show">Please, log in to bet</h2>':"")+'<div class="dg-o-w-draw-bet-action dg-o-w-draw-auth-show"><h5>How much do you want to bet?</h5><form id="bet-form" class="dg-o-w-one-field-form"><input type="number" min="1" max="1000" placeholder="50"/><input type="submit" value="Bet points" /></form><div id="dg-o-w-get-points-btn" class="btn-dg-o-w-outline">Get additional points</div></div>'+(null!==t.Winner?'<div class="dg-o-w-draw-winner"><img src="'+(t.Winner.ImageUrl||DGW.helpers.checkImagesForSrc())+'" /><h4>'+t.Winner.UserName+" has won this draw. Our congratulations!</h4></div>":"")+("not-drawn"==n?'<div class="dg-o-w-draw-winner"><h4>Winner will be announced very soon!</h4></div>':"")+("drawn-no-players"==n?'<div class="dg-o-w-draw-winner"><h4>Unfortunately, no one has participated in this Draw</h4></div>':"")+r+"</div></div></div>",i&&i.IsWinner&&(1==i.NeedToClaimPrize?a.innerHTML=s+'<div class="dg-o-w-section-content"><div class="dg-o-w-single-draw">'+o+'<div class="dg-o-w-draw-right-side won"><h2>Congrats, you\'ve won!!!</h2><h5>'+t.Prize.Title+"</h5><p>"+t.Prize.Description+'</p><div><h2 class="show-claimed">You\'ve already claimed your prize!</h2><h5 class="hide-claimed">Put your address to get the prize</h5><form id="claim-prize" class="dg-o-w-form hide-claimed"><input type="text" name="Address1" placeholder="Address line 1" /><input type="text" name="Address2" placeholder="Address line 2" /><input type="text" name="County" placeholder="County" /><input type="text" name="Postcode" placeholder="Postcode" /><input type="submit" value="Submit " /></form></div>'+r+"</div></div></div>":a.innerHTML=s+'<div class="dg-o-w-section-content"><div class="dg-o-w-single-draw">'+o+'<div class="dg-o-w-draw-right-side won"><h2>Congrats, you\'ve won!!!</h2><h5>'+t.Prize.Title+"</h5><p>"+t.Prize.Description+"</p><div><h2>You've already claimed your prize!</h2></div>"+r+"</div></div></div>"),a.querySelector(".dg-o-w-draw-bet-info")&&DGW.global.api.requests.drawPlayers(e,function(e){if(e.RecentPlayers.length>0){var t=document.createElement("div");if(e.RecentPlayers.forEach(function(e,i){if(!(i>2)){var n=document.createElement("img");n.src=e.ImageUrl,t.appendChild(n)}}),l.appendChild(t),e.TotalCount>3){var i=document.createElement("p");i.innerHTML=e.TotalCount+" users have done this",l.appendChild(i)}a.querySelector(".dg-o-w-draw-bet-info").appendChild(l)}}),a.querySelector("#dg-o-w-get-points-btn")&&a.querySelector("#dg-o-w-get-points-btn").addEventListener("click",function(){DGW.main.methods.changeMainState("earn")}),a.querySelector(".dg-o-w-submenu li.dg-o-w-back-draws").addEventListener("click",function(){DGW.main.methods.changeMainState("draws")}),a.querySelector("#bet-form")&&a.querySelector("#bet-form").addEventListener("submit",function(t){t.preventDefault();var i=this.querySelector("input[type=submit]"),n=+this.querySelector("input[type=number]").value;DGW.global.api.requests.drawBet(e,n,function(){i.disabled=!1,DGW.main.methods.notificationConstructor("We've received your "+n+" points. Bet more!")},function(e){i.disabled=!1,DGW.main.methods.notificationConstructor(DGW.helpers.errorParser(e).messages,"error")}),i.disabled=!0}),a.querySelector("#claim-prize")&&a.querySelector("#claim-prize").addEventListener("submit",function(t){t.preventDefault();var i=this,n={};Array.prototype.slice.call(i.querySelectorAll("input:not([type=submit])")).forEach(function(e){""==e.value&&"Address1"!=e.name&&(e.value="-"),n[e.name]=e.value}),DGW.global.api.requests.claimPrize(e,n,function(){DGW.helpers.addClass(a.querySelector(".dg-o-w-single-draw"),"claimed"),DGW.main.methods.notificationConstructor(["We've received your address","And will contact you very soon!"])},function(e){DGW.main.methods.notificationConstructor(DGW.helpers.errorParser(e).messages,"error")})}),DGW.helpers.drawsTimer.push({dt:t.EndDate,elem:a.querySelector(".dg-o-w-countdown")})||(DGW.helpers.addClass(a.querySelector(".dg-o-w-single-draw"),"expired"),a.querySelector(".dg-o-w-countdown")&&(a.querySelector(".dg-o-w-countdown").innerHTML="Finished "+String(DGW.helpers.getDateFromNow(t.EndDate))));var d=!1;i&&i.IsWinner&&(d=!0),a.querySelector(".dg-o-w-like.dg-o-w-facebook-like").addEventListener("click",function(t){t.preventDefault(),DGW.global.actions.requests.shareFb(e,d)}),a.querySelector(".dg-o-w-like.dg-o-w-twitter-like").addEventListener("click",function(i){i.preventDefault(),DGW.global.actions.requests.shareTw(e,d?"I've just won "+t.Prize.Title:"Win ",d)}),DGW.main.elements.widgetContent.appendChild(a),DGW.main.methods.checkSectionHeight(),DGW.main.methods.setRewardedActions()},DGW.main.methods.activitiesConstructor=function(e){e.sort(function(e,t){return new Date(t.Date)-new Date(e.Date)});var t=DGW.main.elements.pages.activitiesMain.querySelector(".dg-o-w-activities-holder ul");t.innerHTML="",e.forEach(function(e){var i=!1;e.User||(i=!0,e.User={UserName:"You",ImageUrl:DGW.global.userStats.imageUrl});var n=document.createElement("li"),a="";if(a+=e.User.UserName,a+=i!==!0?" has ":" have ",a+="Outflow"===e.Direction?"spent ":"earned ",a+="<span>",a+=e.PointsAmount,a+=" points",a+="</span>","GamePurchase"===e.ActivityType&&"Draw"===e.GameOrder.GameType&&(a+=" playing the draw",a+=" to win "+e.GameOrder.PrizeTitle),"RewardedActionReward"===e.ActivityType)switch(e.RewardedAction.Type){case"UserRegister":a+=" for joining our rewarded program";break;case"FacebookConnect":a+=" for connecting with Facebook";break;case"FriendSignUp":a+=" inviting a friend to our rewarding program";break;case"ConnectNewApp":a+=" connecting another app";break;case"FacebookShare":a+=" shouting out about us on Facebook";break;case"TwitterShare":a+=" tweeting about us";break;case"CommissionConfirmed":a+=" for making a great purchase"}if("OfferActionReward"===e.ActivityType)if("Share"===e.OfferAction.Type.Group.Name)switch(e.OfferAction.Type.Name){case"FacebookShare":a+=" finishing Facebook share offer";break;case"TwitterShare":a+=" finishing Twitter share offer"}else"Watch"===e.OfferAction.Type.Group.Name?a+=" watching a video":"Discover"===e.OfferAction.Type.Group.Name&&(a+=" downloading an app");"BadgeReward"===e.ActivityType&&(a+=' getting a shiny new badge "'+e.BadgeReward.Title+'"'),n.innerHTML='<div class="dg-o-w-single-activity"><img src="'+DGW.helpers.checkImagesForSrc(e.User.ImageUrl)+'" alt=""/><div class="dg-o-w-activity-message-holder"><p>'+a+"</p></div></div><h6>"+DGW.helpers.getDateFromNow(e.Date)+"</h6>","Outflow"===e.Direction&&DGW.helpers.addClass(n,"spent"),t.appendChild(n)}),DGW.main.methods.setRewardedActions()},DGW.main.methods.offersConstructor=function(e){function t(){return s.offers.filter(function(e){return g==l&&c==d?!0:g==l?e.Type.Group.Name.toLowerCase()==c:c==d?e.Sponsor.Name.toLowerCase()==g:e.Sponsor.Name.toLowerCase()==g&&e.Type.Group.Name.toLowerCase()==c})}function i(e){n.innerHTML="",e.forEach(function(e){var t=document.createElement("li");t.innerHTML='<a href="" target="_blank"><div class="dg-o-w-offer"><div class="dg-o-w-offer-left"><img src="'+(e.ImageUrl||"http://lorempixel.com/100/100/sports")+'" /><span>'+e.PointsReward+'</span></div><div class="dg-o-w-offer-right"><h4>'+e.Title+"</h4><h5>"+e.Description+'</h5><div class="dg-o-w-users-done"><div><img src="http://lorempixel.com/70/70/people/1" /><img src="http://lorempixel.com/70/70/people/2" /><img src="http://lorempixel.com/70/70/people/3" /></div><p>10 users have done this</p></div></div></div></a>',"DownloadMobileApp"!=e.Type.Name&&"DownloadToolbar"!=e.Type.Name||(t.querySelector("a").href=e.CustomData),t.querySelector("a").addEventListener("click",function(t){DGW.global.authorized?("DownloadMobileApp"!=e.Type.Name&&"DownloadToolbar"!=e.Type.Name&&t.preventDefault(),"FacebookShare"==e.Type.Name?DGW.global.offers.requests.shareOfferFb(e.Id):"TwitterShare"==e.Type.Name?DGW.global.offers.requests.shareOfferTw(e.Id,e.CustomData):"WatchVideo"==e.Type.Name?DGW.global.offers.requests.watchVideo(e.Id,e.CustomData):"DownloadToolbar"==e.Type.Name&&DGW.global.api.requests.trackOffer(e.Id)):(t.preventDefault(),DGW.main.methods.changeMainState("profile"))}),n.appendChild(t)})}var n=DGW.main.elements.pages.earnMain.querySelector(".dg-o-w-list-offers"),a=DGW.main.elements.pages.earnMain.querySelector(".dg-o-w-submenu ul"),o=DGW.main.elements.pages.earnMain.querySelector(".dg-o-w-submenu select"),r=DGW.main.elements.pages.earnMain.querySelector(".dg-o-w-section-content h3 span"),s={offers:e.Offers,sponsors:["All offers"],categories:["All"]},l=s.sponsors[0].toLowerCase(),d=s.categories[0].toLowerCase(),c=d,g=l;r.innerHTML=e.TotalPointsReward,a.innerHTML="",o.innerHTML="",e.Offers.forEach(function(e){0==s.sponsors.filter(function(t){return t===e.Sponsor.Name}).length&&s.sponsors.push(e.Sponsor.Name),0==s.categories.filter(function(t){return t===e.Type.Group.Name}).length&&s.categories.push(e.Type.Group.Name)}),s.sponsors.forEach(function(e){var t=document.createElement("option");t.innerHTML=e,t.value=e.toLowerCase(),o.appendChild(t)}),s.categories.forEach(function(e,n){var o=document.createElement("li");o.innerHTML=e,o.addEventListener("click",function(){Array.prototype.slice.call(a.querySelectorAll("li")).forEach(function(e){DGW.helpers.removeClass(e,"dg-o-w-active")}),DGW.helpers.addClass(this,"dg-o-w-active"),c=e.toLowerCase(),i(t())}),"all"==e.toLowerCase()&&DGW.helpers.addClass(o,"dg-o-w-active"),a.appendChild(o)}),s.sponsors.length>2?o.addEventListener("change",function(){var e=this;DGW.helpers.console.log(e.value),g=e.value.toLowerCase(),i(t())}):o.style.display="none",i(s.offers),DGW.main.methods.setRewardedActions()},DGW.main.methods.leaderboardConstructor=function(e){var t=DGW.main.elements.pages.activitiesMain,i=t.querySelector(".dg-o-w-activity-slider ul");i.innerHTML="",e.forEach(function(e){var t=document.createElement("li");t.innerHTML='<div><img src="'+e.ImageUrl+'"><span>'+e.Amount+"</span></div><h4>"+e.UserName+"</h4>",i.appendChild(t)}),DGW.global.elements.leaderboardSlider=new Slider(i.parentNode,{visibles:5,controlNext:".dg-o-w-activity-slider-next",controlPrev:".dg-o-w-activity-slider-prev"})},DGW.main.methods.notificationConstructor=function(e,t){var i=DGW.main.elements.pages.notificationHolder.querySelector("ul");if(i.innerHTML="",t||(t="success"),DGW.helpers.isArray(e))e.forEach(function(e){var t=document.createElement("li");t.innerHTML=e,i.appendChild(t)}),DGW.main.methods.showNotificationBar(t);else if("string"==typeof e){var n=document.createElement("li");n.innerHTML=e,i.appendChild(n),DGW.main.methods.showNotificationBar(t)}else DGW.helpers.console.warn("Notification parameters are not of the type of [Array] or String")};var e=document.createElement("link");e.rel="stylesheet",e.type="text/css",e.addEventListener("load",function(){DGW.global.api.requests.checkServerAvailability()}),e.href=DGW.global.widgetPathName+"style.min.css";var t=document.head.getElementsByTagName("link")[document.head.getElementsByTagName("link").length-1];DGW.helpers.insertAfter(e,t,document.head),window.dgwActivateDebugMode=function(){DGW.global.debug=!0}}});
